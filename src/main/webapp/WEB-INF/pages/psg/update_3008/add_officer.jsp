
<%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>

<script src="js/miso/miso_js/jquery-2.2.3.min.js"></script>
<script type="text/javascript" src="js/AES_ENC_DEC/lib/aes.js"></script>
<script type="text/javascript" src="js/AES_ENC_DEC/lib/pbkdf2.js"></script>
<script type="text/javascript" src="js/AES_ENC_DEC/AesUtil.js"></script>

<script src="js/JS_CSS/jquery-1.10.2.js" type="text/javascript"></script>
<link rel="stylesheet" href="js/miso/autoComplate/autoComplate.css">
<script src="js/miso/commonJS/commonmethod.js" type="text/javascript"></script>
<script src="js/miso/orbatJs/orbatAll.js" type="text/javascript"></script>

<link rel="stylesheet" href="js/Calender/Calender_jquery-ui.css">
<!-- <script src="js/Calender/jquery-2.2.3.min.js"></script> -->
<script src="js/Calender/jquery-ui.js"></script>
<script src="js/Calender/datePicketValidation.js"></script>
<script src="js/miso/miso_js/jquery-2.2.3.min.js"></script>
<script type="text/javascript" src="js/AES_ENC_DEC/lib/aes.js"></script>
<script type="text/javascript" src="js/AES_ENC_DEC/lib/pbkdf2.js"></script>
<script type="text/javascript" src="js/AES_ENC_DEC/AesUtil.js"></script>
<script src="js/JS_CSS/jquery-1.10.2.js" type="text/javascript"></script>
<link rel="stylesheet" href="js/miso/autoComplate/autoComplate.css">
<script src="js/miso/commonJS/commonmethod.js" type="text/javascript"></script>

<link rel="stylesheet" href="js/Calender/Calender_jquery-ui.css">
<script src="js/Calender/jquery-2.2.3.min.js"></script>
<script src="js/Calender/jquery-ui.js"></script>
<script src="js/Calender/datePicketValidation.js"></script>

<!-- <link rel="stylesheet" href="js/assets/css/bootstrap.min.css"> -->
<link rel="stylesheet" href="js/layout/css/animation.css">
<!-- <link rel="stylesheet" href="js/assets/scss/style.css">  -->
<link rel="stylesheet" href="js/assets/collapse/collapse.css">
<script src="js/miso/orbatJs/orbatAll.js" type="text/javascript"></script>
<script src="js/common/commonmethod.js" type="text/javascript"></script>


<!-- resizable_col -->
<link rel="stylesheet"
	href="js/assets/adjestable_Col/jquery.resizableColumns.css">
<script src="js/assets/adjestable_Col/jquery.resizableColumns.js"
	type="text/javascript"></script>





<link rel="stylesheet" href="js/miso/assets/css/bootstrap.min.css">
<link rel="stylesheet" href="js/miso/assets/css/font-awesome.min.css">
<link rel="stylesheet" href="js/miso/assets/scss/style.css">

<link href="js/JS_CSS/jquery.dataTables.min.css" rel="stylesheet">
<script src="js/miso/miso_js/jquery-2.2.3.min.js"></script>
<script type="text/javascript" src="js/AES_ENC_DEC/lib/aes.js"></script>
<script type="text/javascript" src="js/AES_ENC_DEC/lib/pbkdf2.js"></script>
<script type="text/javascript" src="js/AES_ENC_DEC/AesUtil.js"></script>

<script src="js/JS_CSS/jquery-1.10.2.js" type="text/javascript"></script>
<link rel="stylesheet" href="js/miso/autoComplate/autoComplate.css">
<script src="js/miso/commonJS/commonmethod.js" type="text/javascript"></script>

<link rel="stylesheet" href="js/Calender/Calender_jquery-ui.css">
<script src="js/Calender/jquery-2.2.3.min.js"></script>
<script src="js/Calender/jquery-ui.js"></script>
<script src="js/Calender/datePicketValidation.js"></script>
<script src="js/JS_CSS/jquery-3.3.1.js"></script>
<script src="js/JS_CSS/jquery.dataTables.js"></script>
<script src="js/miso/miso_js/jquery-2.2.3.min.js"></script>
<script type="text/javascript" src="js/AES_ENC_DEC/lib/aes.js"></script>
<script type="text/javascript" src="js/AES_ENC_DEC/lib/pbkdf2.js"></script>

<script type="text/javascript" src="js/AES_ENC_DEC/AesUtil.js"></script>

<script src="js/JS_CSS/jquery-1.10.2.js" type="text/javascript"></script>
<link rel="stylesheet" href="js/miso/autoComplate/autoComplate.css">
<script src="js/miso/commonJS/commonmethod.js" type="text/javascript"></script>
<script src="js/common/commonmethod.js" type="text/javascript"></script>

<link rel="stylesheet" href="js/Calender/Calender_jquery-ui.css">
<script src="js/Calender/jquery-2.2.3.min.js"></script>
<script src="js/Calender/jquery-ui.js"></script>
<script src="js/Calender/datePicketValidation.js"></script>

<!-- <link rel="stylesheet" href="js/assets/css/bootstrap.min.css"> -->
<link rel="stylesheet" href="js/layout/css/animation.css">
<!-- <link rel="stylesheet" href="js/assets/scss/style.css">  -->
<link rel="stylesheet" href="js/assets/collapse/collapse.css">

<script src="js/miso/orbatJs/orbatAll.js" type="text/javascript"></script>
<!-- <script src="js/common/commonmethod.js" type="text/javascript"></script> -->

<!-- resizable_col -->
<link rel="stylesheet"
	href="js/assets/adjestable_Col/jquery.resizableColumns.css">
<script src="js/assets/adjestable_Col/jquery.resizableColumns.js"
	type="text/javascript"></script>


<form:form name="add_comm_offrs_3008" id="add_comm_offrs_3008"
	action="add_comm_offrs_3008_action?${_csrf.parameterName}=${_csrf.token}"
	method="post" class="form-horizontal"
	commandName="add_comm_offrs_3008_cmd">
	<div class="animated fadeIn">
		<div class="container" align="center">
			<div class="card">
				<div class="card-header">
					<h5>add offrs 3008</h5>
					<h6 class="enter_by">
						<span style="font-size: 18px; color: red;">All Fields
							Mandatory</span>
					</h6>
					<h6 class="enter_by">
						<!-- <span style="font-size:12px;color:red;">(To be filled by PCTA only)</span> -->
					</h6>
				</div>
				<div class="card-body card-block">
					<div class="col-md-12">
						<div class="col-md-6">
							<div class="row form-group">
								<div class="col-md-4">
									<label class=" form-control-label"><strong
										style="color: red;">* </strong>Authority</label>
								</div>
								<div class="col-md-8">
									<input type="text" id="authority" name="authority"
										class="form-control autocomplete" autocomplete="off"
										maxlength="100" onkeyup="return specialcharecter(this)">
								</div>
							</div>
						</div>

						<div class="col-md-6">
							<div class="row form-group">
								<div class="col-md-4">
									<label class=" form-control-label"><strong
										style="color: red;">* </strong> Authority Date</label>
								</div>
								<div class="col-md-8">
									<input type="hidden" id="id" name="id"
										class="form-control autocomplete" value="0" autocomplete="off">
											<input type="hidden" id="rolesusno" name="rolesusno"
										class="form-control autocomplete" value="0" autocomplete="off">
									<input type="hidden" id="id1" name="id1"
										class="form-control autocomplete" value="0" autocomplete="off">
									<input type="text" name="date_of_authority"
										id="date_of_authority" maxlength="10"
										onclick="clickclear(this, 'DD/MM/YYYY')" class="form-control"
										style="width: 85%; display: inline;"
										onfocus="this.style.color='#000000'"
										onblur="clickrecall(this,'DD/MM/YYYY');validateDate_BackDate(this.value,this);"
										onkeyup="clickclear(this, 'DD/MM/YYYY')"
										onchange="clickrecall(this,'DD/MM/YYYY')" aria-required="true"
										autocomplete="off" style="color: rgb(0, 0, 0);">
								</div>
							</div>
						</div>
					</div>

					<div class="col-md-12 form-group">
						<div class="col-md-2">
							<label for="text-input" class=" form-control-label"><strong
								style="color: red;">* </strong> Personal No</label>
						</div>

						<div class="col-md-10">
							<div class="row form-group">
								<div class="col-md-4">
									<select id="persnl_no1" name="persnl_no1"
										class="form-control-sm form-control">
										<option value="-1">--Select--</option>
										<c:forEach var="item" items="${getPersonalType}"
											varStatus="num">
											<option value="${item[0]}" name="${item[1]}">${item[1]}</option>
										</c:forEach>
									</select>
								</div>
								<div class="col-md-4">
									<input type="text" id="persnl_no2" name="persnl_no2"
										onkeyup="onChangePerNo(this);"
										onkeypress="return isNumber0_9Only(event)"
										class="form-control-sm form-control" autocomplete="off"
										placeholder="Enter No..." maxlength="5">
								</div>
								<div class="col-md-4">
									<input type="text" id="persnl_no3" name="persnl_no3"
										class="form-control-sm form-control" autocomplete="off"
										maxlength="10" readonly="readonly">
										<input type="hidden" id="personal_noc" name="personal_noc" class="form-control autocomplete" autocomplete="off">
								       <input type="hidden" id="sus_noc" name="sus_noc" class="form-control autocomplete" autocomplete="off">
								       <input type="hidden" id="unitnamec" name="unitnamec" class="form-control autocomplete" autocomplete="off">
								</div>
								
							</div>
						</div>
					</div>
						<div id="divforunitnote" style="display:none;"  class="col-md-12">
					<div class="col-md-1">
									<label class=" form-control-label" style="font-weight: bold; color: red;">Note:</label>
								</div>
								<div class="col-md-10">
					<label class=" form-control-label" style="font-weight: bold; color: red;" id="noteforunit_id"></label>
					</div>
					</div>	
 					<div id="comm_div" style="display: none;">
						<div class="col-md-12">
							<div class="col-md-6">
								<div class="row form-group">
									<div class="col-md-4">
										<label class=" form-control-label"><strong
											style="color: red;">* </strong>Cadet No</label>
									</div>
									<div class="col-md-8">
										<input type="text" id="cadet_no" name="cadet_no"
											class="form-control autocomplete" autocomplete="off"
											maxlength="7" onkeyup="return specialcharecterCadet(this);"
											onkeypress="return AvoidSpace(event)">
									</div>
								</div>
							</div>
						</div>



						<div class="col-md-12">
							<div class="col-md-6">
								<div class="row form-group">
									<div class="col-md-4">
										<label class=" form-control-label"> <strong
											style="color: red;">* </strong>Course No
										</label>
									</div>
									<div class="col-md-8">
										<input type="text" id="batch_no" name="batch_no"
											class="form-control autocomplete" autocomplete="off"
											maxlength="30" onkeypress="return isNumber0_9Only(event)">
									</div>
								</div>
							</div>

							<div class="col-md-6">
								<div class="row form-group">
									<div class="col-md-4">
										<label class=" form-control-label"><strong
											style="color: red;">* </strong>Course Comm</label>
									</div>
									<div class="col-md-8">
										<!-- <input type="text" id="course" name="course" class="form-control autocomplete" autocomplete="off" > -->
										<select name="course" id="course"
											class="form-control-sm form-control">
											<option value="0">--Select--</option>
											<c:forEach var="item" items="${getCourseNameList}"
												varStatus="num">
												<option value="${item[0]}" name="${item[1]}">${item[1]}</option>
											</c:forEach>
										</select>
									</div>
								</div>
							</div>
						</div>

						<div class="col-md-12">
							<div class="col-md-6">
								<div class="row form-group">
									<div class="col-md-4">
										<label class=" form-control-label"> <strong
											style="color: red;">* </strong> Name
										</label>
									</div>
									<div class="col-md-8">
										<input type="text" id="namec" name="namec"
											class="form-control autocomplete" autocomplete="off"
											maxlength="50" onkeypress="return onlyAlphabets(event);"
											oninput="this.value = this.value.toUpperCase()">
									</div>
								</div>
							</div>

							<div class="col-md-6">
								<div class="row form-group">
									<div class="col-md-4">
										<label class=" form-control-label"><strong
											style="color: red;">* </strong> Gender</label>
									</div>
									<div class="col-md-8">

										<select name="gender" id="gender"
											class="form-control-sm form-control">
											<option value="0">--Select--</option>
											<c:forEach var="item" items="${getGenderList}"
												varStatus="num">
												<option value="${item[0]}" name="${item[1]}">${item[1]}</option>
											</c:forEach>
										</select>
									</div>
								</div>
							</div>
						</div>


						<div class="col-md-12">
							<div class="col-md-6">
								<div class="row form-group">
									<div class="col-md-4">
										<label class=" form-control-label"> <strong
											style="color: red;">* </strong>Type of Commission Granted
										</label>
									</div>
									<div class="col-md-8">

										<select name="type_of_comm_granted" id="type_of_comm_granted"
											class="form-control-sm form-control">
											<option value="0">--Select--</option>
											<c:forEach var="item" items="${getTypeOfCommissionList}"
												varStatus="num">
												<option value="${item[0]}" name="${item[1]}">${item[1]}</option>
											</c:forEach>
										</select>
									</div>
								</div>
							</div>

							<div class="col-md-6">
								<div class="row form-group">
									<div class="col-md-4">
										<label class=" form-control-label"><strong
											style="color: red;">* </strong> Date of Commission </label>
									</div>
									<div class="col-md-8">
										<input type="text" name="date_of_commission"
											id="date_of_commission" maxlength="10"
											onclick="clickclear(this, 'DD/MM/YYYY')" class="form-control"
											style="width: 85%; display: inline;"
											onfocus="this.style.color='#000000'"
											onblur="clickrecall(this,'DD/MM/YYYY');validateDate_BackDate(this.value,this);"
											onkeyup="clickclear(this, 'DD/MM/YYYY')"
											onchange="clickrecall(this,'DD/MM/YYYY');SetMin();"
											aria-required="true" autocomplete="off"
											style="color: rgb(0, 0, 0);">
									</div>
								</div>
							</div>
						</div>

						<div class="col-md-12">

							<div class="col-md-6">
								<div class="row form-group">
									<div class="col-md-4">
										<label class=" form-control-label"><strong
											style="color: red;">* </strong> Date of Seniority</label>
									</div>
									<div class="col-md-8">
										<!-- <input type="date" id="date_of_seniority" name="date_of_seniority" class="form-control autocomplete" autocomplete="off" > -->
										<input type="text" name="date_of_seniority"
											id="date_of_seniority" maxlength="10"
											onclick="clickclear(this, 'DD/MM/YYYY')" class="form-control"
											style="width: 85%; display: inline;"
											onfocus="this.style.color='#000000'"
											onblur="clickrecall(this,'DD/MM/YYYY');validateDate_BackDate(this.value,this);"
											onkeyup="clickclear(this, 'DD/MM/YYYY')"
											onchange="clickrecall(this,'DD/MM/YYYY')"
											aria-required="true" autocomplete="off"
											style="color: rgb(0, 0, 0);">
									</div>
								</div>
							</div>

						</div>


						<div class="col-md-12">

							<div class="col-md-6">
								<div class="row form-group">
									<div class="col-md-4">
										<label class=" form-control-label"><strong
											style="color: red;">* </strong> Rank</label>
									</div>
									<div class="col-md-8">
										<select name="rankc" id="rankc"
											class="form-control-sm form-control">
											<option value="0">--Select--</option>
											<c:forEach var="item" items="${getTypeofRankListc}"
												varStatus="num">
												<option value="${item[0]}" name="${item[1]}">${item[1]}</option>
											</c:forEach>
										</select>
									</div>
								</div>
							</div>

							<div class="col-md-6">
								<div class="row form-group">
									<div class="col-md-4">
										<label class=" form-control-label"><strong
											style="color: red;">* </strong> Date of Rank</label>
									</div>
									<div class="col-md-8">

										<input type="text" name="date_of_rank" id="date_of_rank"
											maxlength="10" onclick="clickclear(this, 'DD/MM/YYYY')"
											class="form-control" style="width: 85%; display: inline;"
											onfocus="this.style.color='#000000'"
											onblur="clickrecall(this,'DD/MM/YYYY');validateDate_BackDate(this.value,this);"
											onkeyup="clickclear(this, 'DD/MM/YYYY')"
											onchange="clickrecall(this,'DD/MM/YYYY')"
											aria-required="true" autocomplete="off"
											style="color: rgb(0, 0, 0);">
									</div>
								</div>
							</div>
						</div>



						<div class="col-md-12">
							<div class="col-md-6">
								<div class="row form-group">
									<div class="col-md-4">
										<label class=" form-control-label"> <strong
											style="color: red;">* </strong>Date of Birth
										</label>
									</div>
									<div class="col-md-8">
										<input type="text" name="date_of_birth" id="date_of_birth"
											maxlength="10" onclick="clickclear(this, 'DD/MM/YYYY')"
											class="form-control" style="width: 85%; display: inline;"
											onfocus="this.style.color='#000000'"
											onblur="clickrecall(this,'DD/MM/YYYY');validateDate_BackDate(this.value,this);"
											onkeyup="clickclear(this, 'DD/MM/YYYY')"
											onchange="clickrecall(this,'DD/MM/YYYY');calculate_age(this);SetMin();"
											aria-required="true" autocomplete="off"
											style="color: rgb(0, 0, 0);">
									</div>
								</div>
							</div>
						</div>

						<div class="col-md-12">
							<div class="col-md-6">
								<div class="row form-group">
									<div class="col-md-4">
										<label class=" form-control-label"><strong
											style="color: red;">* </strong> Unit SUS No </label>
									</div>
									<div class="col-md-8">
										<input type="text" id="unit_sus_no" name="unit_sus_no"
											class="form-control autocomplete" autocomplete="off"
											maxlength="8" onkeypress="return AvoidSpace(event)"
											onkeyup="return specialcharecter(this)">
									</div>
								</div>
							</div>

							<div class="col-md-6">
								<div class="row form-group">
									<div class="col-md-4">
										<label class=" form-control-label"><strong
											style="color: red;">* </strong> Unit Posted To </label>
									</div>
									<div class="col-md-8">
										<input type="text" id="unit_posted_to" name="unit_posted_to"
											class="form-control autocomplete" autocomplete="off"
											maxlength="50" onkeyup="return specialcharecter(this)">
									</div>
								</div>
							</div>
						</div>
						<div class="col-md-12">
							<div class="col-md-6">
								<div class="row form-group">
									<div class="col-md-4">
										<label class=" form-control-label"><strong
											style="color: red;">* </strong> Date of TOS</label>
									</div>
									<div class="col-md-8">
										<input type="text" name="date_of_tosc" id="date_of_tosc"
											maxlength="10" onclick="clickclear(this, 'DD/MM/YYYY')"
											class="form-control" style="width: 85%; display: inline;"
											onfocus="this.style.color='#000000'"
											onblur="clickrecall(this,'DD/MM/YYYY');validateDate_BackDate(this.value,this);"
											onkeyup="clickclear(this, 'DD/MM/YYYY')"
											onchange="clickrecall(this,'DD/MM/YYYY')"
											aria-required="true" autocomplete="off"
											style="color: rgb(0, 0, 0);">
									</div>
								</div>
							</div>
						</div>
						<div class="col-md-12">
							<div class="col-md-6">
								<div class="row form-group">
									<div class="col-md-4">
										<label class=" form-control-label"><strong
											style="color: red;">* </strong> Parent Arm/Service </label>
									</div>
									<div class="col-md-8">
										<select name="parent_arm" id="parent_arm"
											class="form-control-sm form-control"
											onchange="chgarm(this,'regiment');">
											<option value="0">--Select--</option>
											<c:forEach var="item" items="${getParentArmList}"
												varStatus="num">
												<option value="${item[0]}" name="${item[1]}">${item[1]}</option>
											</c:forEach>
										</select>
									</div>
								</div>
							</div>
							<div class="col-md-6">
								<div class="row form-group">
									<div class="col-md-4">
										<label class=" form-control-label"> Regiment</label>
									</div>
									<div class="col-md-8">
										<input type="hidden" id="parent_armLb" name="parent_armLb"
											class="form-control autocomplete" autocomplete="off">
										<select name="regiment" id="regiment"
											class="form-control-sm form-control" disabled="disabled">
											<option value="0">--Select--</option>
										</select>
									</div>
								</div>
							</div>
						</div>
						<div class="col-md-12">
							<div class="col-md-6">
								<div class="row form-group">
									<div class="col-md-4">
										<label class=" form-control-label">Parent SUS </label>
									</div>
									<div class="col-md-8">
										<input type="text" id="parent_sus_no" name="parent_sus_no"
											class="form-control autocomplete" autocomplete="off"
											maxlength="8" onkeypress="return AvoidSpace(event)"
											onkeyup="return specialcharecter(this)">
									</div>
								</div>
							</div>

							<div class="col-md-6">
								<div class="row form-group">
									<div class="col-md-4">
										<label class=" form-control-label"> Parent Unit </label>
									</div>
									<div class="col-md-8">
										<input type="text" id="parent_unit" name="parent_unit"
											class="form-control autocomplete" autocomplete="off"
											maxlength="50" onkeyup="return specialcharecter(this)">
									</div>
								</div>
							</div>
						</div>

					</div>
				</div>
				<div id="button_div" style="display: none;">

				<div class="card-footer" align="center" class="form-control">
					<a href="add_offrs_3008" class="btn btn-success btn-sm">Clear</a> <input
						type="submit" class="btn btn-primary btn-sm" value="Save & Approve"
						onclick=" return validate();">
					<!---->
				</div>
				</div>
				<div id="postinout_div" style="display: none;">
				
				<div class="animated fadeIn">
		<div class="container" align="center">
			<div class="card">
			<form>			
				<div class="card-header">
					<h5>POSTING IN/OUT</h5>
					<h6 class="enter_by">
						<span style="font-size: 12px; color: red;">(To be entered by UNIT)</span>
					</h6>
				</div>
				<!-- <div class="col-md-12">
				<div class="col-md-8">	
				  <input type="radio" name="selection" value="withoutcensus" onclick="loadContent()"> <b>Without Census</b> 
                 <input type="radio" name="selection" value="withcensus" onclick="loadContent()"> <b>With Census</b>
                </div>
                 </div>
                 <p>  
                 </p>
                 <span></span>
                 <span></span> -->
				<div class="card-body card-block">	   
					<div class="col-md-12">
						 <div class="col-md-6" id=""  >
							<div class="row form-group">
								<div class="col-md-4">
									<strong style="color: red;">  </strong><label class=" form-control-label">Action </label>
								</div>
								<div class="col-md-8">									
									<select name="type" id="type" class="form-control"   >
										<option value="">--Select--</option>
										<c:forEach var="item" items="${getPostINOutstatusList}" varStatus="num">
										<option value="${item[0]}" name="${item[1]}">${item[1]}</option>
										</c:forEach>
									</select>										      
							        <input type="hidden" id="comm_id" name="comm_id" class="form-control autocomplete" autocomplete="off">
									<input type="hidden" id="census_id" name="census_id" class="form-control autocomplete" autocomplete="off">		
								</div>							
							</div>
						</div>					
						<div class="col-md-6" id="category_hide">
             				<div class="row form-group">
				               <div class="col-md-4">
				                    <label class=" form-control-label"><strong style="color: red;"> </strong> Category</label>
				                </div>
				                <div class="col-md-8">
				                  <select name="service_category" id="service_category" onchange="fn_service_category_change();" class="form-control-sm form-control">											
										<option value="${getServiceCategoryList.get(0)[0]}" name="${getServiceCategoryList.get(0)[1]}">${getServiceCategoryList.get(0)[1]}</option>
								  </select>
				                </div>
				            </div>
             			</div>
					</div>
			 </div>						 
		</form>

	<!-- POST OUT FORM START  -->
			
	<div id="div_post_out" class="tabcontent" style="display:none ;">
		<form id="post_out_form">
					<div class="card">
						<div class="card-header">
							<h5>POST OUT</h5>
							<h6 class="enter_by">
								<span style="font-size: 12px; color: red;"></span>
							</h6>
						</div>
					<div class="card-body card-block"><br>
					 <input type="hidden" id="h_id" name="h_id"	class="form-control autocomplete" autocomplete="off" value="0"> 
						<div class="col-md-12">
						<div class="col-md-6">
							<div class="row form-group">
								<div class="col-md-4">
									<label class=" form-control-label"> From SUS No </label>
								</div>
								<div class="col-md-8">								
									 <input type="text" id="from_sus_no" name="from_sus_no" onkeyup="search_sus1from(this,'unit_name') ; specialcharecter(this)" tabindex="-1" onchange="To_sus_check()"
										class="form-control autocomplete" autocomplete="off" maxlength="8" onkeypress="return AvoidSpace(event)" disabled >									 
								</div>
							</div>
						</div>
						 <div class="col-md-6">
							<div class="row form-group">
								<div class="col-md-4">
									<label class=" form-control-label">From Unit Name </label>
								</div>
								<div class="col-md-8">
											
								 <input type="text" id="unit_name" name="unit_name" onkeyup="search_unit1_from(this,'from_sus_no') ; specialcharecter(this)" tabindex="-1" 
										class="form-control autocomplete" maxlength="50" autocomplete="off" onchange="To_sus_check();" disabled>
									 
							 	
								</div>
							</div>
						</div> 
					</div>
						<div class="col-md-12">
						<div class="col-md-4">
							<div class="row form-group">
								<div class="col-md-4">
									<label class=" form-control-label"> Personal No </label>
								</div>
								<div class="col-md-8">								
									<input type="text" id="personnel_no" name="personnel_no" class="form-control autocomplete" autocomplete="off"
										onchange="personal_number()" onkeyup="getPersonnel_no(this,'from_sus_no') ; specialcharecter(this)"
										maxlength="9" onkeypress="return AvoidSpace(event)" disabled>
								</div>
							</div>
						</div>
						<div class="col-md-4">
							<div class="row form-group">
								<div class="col-md-4">
									<label class=" form-control-label"> Name </label>
								</div>
								<div class="col-md-8">
									<label id="name" name="name"> </label>
									
								</div>
							</div>
						</div>
						<div class="col-md-4">
							<div class="row form-group">
								<div class="col-md-4">
									<label class=" form-control-label"> Rank </label>

								</div>
								<div class="col-md-8">
									<label id="rank" name="rank"> </label> 
									<input type="hidden" id="rank1" name="rank1" class="form-control autocomplete" autocomplete="off">
								</div>
							</div>
						</div>
					
					</div>	
					
					<div id="labelout_div" style="display:none;"  class="col-md-12">
					<div class="col-md-1">
									<label class=" form-control-label" style="font-weight: bold; color: red;">Note:</label>
								</div>
								<div class="col-md-10">
					<label class=" form-control-label" style="font-weight: bold; color: red;" id="labelout_id"></label>
					</div>
					</div>				
				<div class="col-md-12" style="display:none">
					<div class="col-md-6">
							<div class="row form-group">
								<div class="col-md-4">
									<label class=" form-control-label"> Appointment </label>

								</div>
								<div class="col-md-8">
									<label id="out_app_name" name="out_app_name"> </label> 
								
								</div>
							</div>
						</div>
						<div class="col-md-6">
							<div class="row form-group">
								<div class="col-md-4">
									<label class=" form-control-label"> Date of Appointment</label>

								</div>
								<div class="col-md-8">
									<label id="out_app_dt" name="out_app_dt"> </label> 
									
								</div>
							</div>
						</div>
					</div>
					<div class="col-md-12" style="display:none">
						<div class="col-md-6">
							<div class="row form-group">
								<div class="col-md-4">
									<label class=" form-control-label"> Auth No </label>
								</div>
								<div class="col-md-8">
									<input type="text" id="out_auth" name="out_auth" class="form-control autocomplete" maxlength="50" onkeyup="return specialcharecter(this)" autocomplete="off">
								</div>
							</div>
						</div>
						<div class="col-md-6">
							<div class="row form-group">
								<div class="col-md-4">
									<label class=" form-control-label"> Auth Date </label>
								</div>
								<div class="col-md-8"> 									
									<input type="text" name="out_auth_dt" id="out_auth_dt" maxlength="10" value="DD/MM/YYYY" onclick="clickclear(this, 'DD/MM/YYYY')" class="form-control" style="width: 85%;display: inline;"
										onfocus="this.style.color='#000000'" onblur="clickrecall(this,'DD/MM/YYYY');validateDate(this.value,this);" onkeyup="clickclear(this, 'DD/MM/YYYY')" 
										onchange="clickrecall(this,'DD/MM/YYYY')" aria-required="true" autocomplete="off" style="color: rgb(0, 0, 0);" />
								</div>
							</div>
						</div>
					</div>					
					<div class="col-md-12">
						<div class="col-md-6">
							<div class="row form-group">
								<div class="col-md-4">
									<label class=" form-control-label"> To SUS No </label>
								</div>
								<div class="col-md-8">
										<input type="text" id="o_to_sus_no" name="to_sus_no" onkeyup="search_sus(this,'unit_name1') ; specialcharecter(this)"
										class="form-control autocomplete" autocomplete="off" onchange="To_sus_check();" maxlength="8" onkeypress="return AvoidSpace(event)" >
									
								</div>
							</div>
						</div>
						<div class="col-md-6">
							<div class="row form-group">
								<div class="col-md-4">
									<label class=" form-control-label">To Unit Name </label>
								</div>
								<div class="col-md-8">
									<input type="text" id="unit_name1" name="unit_name1" onkeyup="search_unit(this,'o_to_sus_no') ; specialcharecter(this)"
										class="form-control autocomplete" autocomplete="off" maxlength="50" onchange="To_sus_check();" >
									
									
								</div>
							</div>
						</div>
					</div>
					
					<div class="col-md-12">
						<div class="col-md-6">
							<div class="row form-group">
								<div class="col-md-4">
									<label class=" form-control-label"> Date of SOS </label>
								</div>
								<div class="col-md-8">									
									<input type="text" name="dt_of_sos" id="dt_of_sos" maxlength="10" value="DD/MM/YYYY" onclick="clickclear(this, 'DD/MM/YYYY')" class="form-control" style="width: 85%;display: inline;"
										onfocus="this.style.color='#000000'" onblur="clickrecall(this,'DD/MM/YYYY');validateDate_BackDate(this.value,this);" onkeyup="clickclear(this, 'DD/MM/YYYY')" 
										onchange="clickrecall(this,'DD/MM/YYYY')" aria-required="true" autocomplete="off" style="color: rgb(0, 0, 0);" />
								</div>
							</div>
						</div>
						
						 <!-- <div class="col-md-6" id=""  >
							<div class="row form-group">
								<div class="col-md-4">
									<strong style="color: red;"></strong><label class=" form-control-label">Remarks </label>
								</div>
								<div class="col-md-8">
									<textarea id="unit_description_out" name="unit_description_out" class="form-control autocomplete" autocomplete="off" maxlength="250" onkeyup="return specialcharecter(this)"></textarea>
								</div>
							</div>
						</div>	 -->						
					</div>
					
					<div class="col-md-12">						 
						 <div class="col-md-6" id="stats_out" style="display: none;">
							<div class="row form-group">
								<div class="col-md-4">
									<strong style="color: red;"> </strong><label class=" form-control-label">T Status </label>
								</div>
								<div class="col-md-8">
									<select name="t_status_out" id="t_status_out" class="form-control"   >
										<option value= "0">--Select--</option>
										<c:forEach var="item" items="${getstatusList}" varStatus="num">
										<option value="${item[0]}" name="${item[1]}">${item[1]}</option>
										</c:forEach>
									</select>
								</div>
							</div>
						</div>
						
					</div>
				 </div>
				 <div id="postout_div" style="display:block;">
						<div class="card-footer" align="center" class="form-control">
							<a href="" class="btn btn-success btn-sm">Clear</a> 
							<input type="button" class="btn btn-primary btn-sm" value="Save & Approve" onclick="save_postout();">
						</div>
						</div>
					</div>
				</form>
			</div>
		<!-- POST OUT FORM END  -->
			
		<!-- POST IN FORM START  -->
			
	<div id="div_post_in" class="tabcontent" style="display:none ;">
		<form id="post_in_form">
					<div class="card">
						<div class="card-header">
							<h5>POST IN</h5>
							<h6 class="enter_by">
								<span style="font-size: 12px; color: red;"></span>
							</h6>
						</div>
					<div class="card-body card-block"><br>
					<div class="col-md-12">
						<div class="col-md-6">
							<div class="row form-group">
								<div class="col-md-4">
									<label class=" form-control-label"> From SUS No </label>
								</div>
								<div class="col-md-8">
									<input type="text" id="i_from_sus_no" name="from_sus_no" onkeyup="search_sus1from(this,'unit_nameIn') ; specialcharecter(this)" class="form-control autocomplete" autocomplete="off" 
									maxlength="8" onchange="from_sus_check()" onkeypress="return AvoidSpace(event)" disabled>							
								</div>
							</div>
						</div>
						 <div class="col-md-6">
							<div class="row form-group">
								<div class="col-md-4">
									<label class=" form-control-label">From Unit Name </label>
								</div>
								<div class="col-md-8">
											
								 <input type="text" id="unit_nameIn" name="unit_nameIn" onkeyup="search_unit1_from(this,'i_from_sus_no') ; specialcharecter(this)"
										class="form-control autocomplete" maxlength="50" autocomplete="off" onchange="from_sus_check()" disabled>						 	
								</div>
							</div>
						</div> 
					</div>
					<div class="col-md-12">
						<div class="col-md-4">
							<div class="row form-group">
								<div class="col-md-4">
									<label class=" form-control-label"> Personal No </label>
									<input type="hidden" id="i_id" name="i_id"	class="form-control autocomplete" autocomplete="off" value="0"> 					
								</div>
								<div class="col-md-8">
									<input type="text" id="in_personnel_no" name="personnel_no"
										class="form-control autocomplete" autocomplete="off"									
										 maxlength="9" onkeypress="return AvoidSpace(event)" disabled>
								</div>
							</div>
						</div>
					 <div class="col-md-4">
							<div class="row form-group">
								<div class="col-md-4">
									<label class=" form-control-label"> Name </label>
								</div>
								<div class="col-md-8">
									<label id="iname" name="name"> </label>								
								</div>
							</div>
						</div>
						<div class="col-md-4">
							<div class="row form-group">
								<div class="col-md-4">
									<label class=" form-control-label"> Rank </label>
								</div>
								<div class="col-md-8">
									<label id="rank2" name="rank"> </label>									
								</div>
							</div>
						</div>						
					</div>
				
					<div id="labelin_div" style="display:none;"  class="col-md-12">
					<div class="col-md-1">
									<label class=" form-control-label" style="font-weight: bold; color: red;">Note:</label>
								</div>
								<div class="col-md-10">
					<label class=" form-control-label" style="font-weight: bold; color: red;" id="labelin_id"></label>
					</div>
					</div>
					<div class="col-md-12" style="display:none">
					 	<div class="col-md-6">
							<div class="row form-group">
								<div class="col-md-4">
									<label class=" form-control-label">Appointment</label>
								</div>
								<div class="col-md-8">								
 									<label id="app_name" name="app_name"> </label>									
 								</div>
							</div>
						</div>
						<div class="col-md-6">
							<div class="row form-group">
								<div class="col-md-4">
									<label class=" form-control-label"> Date of Appointment </label>
 								</div>
 								<div class="col-md-8"> 
									<label id="app_dt" name="app_dt"> </label>
									<input type="hidden" id="app_dt" name="app_dt" class="form-control autocomplete" autocomplete="off">
 								</div> 
							</div>
						</div>
					</div>
						<div class="col-md-12" style="display:none">
						<div class="col-md-6">
							<div class="row form-group">
								<div class="col-md-4">
									<label class=" form-control-label"> Auth No </label>
								</div>
								<div class="col-md-8">
									<input type="text" id="in_auth" name="in_auth" class="form-control autocomplete" 
									maxlength="50" onkeyup="return specialcharecter(this)" autocomplete="off">
								</div>
							</div>
						</div>
						<div class="col-md-6">
							<div class="row form-group">
								<div class="col-md-4">
									<label class=" form-control-label"> Auth Date </label>
								</div>
								<div class="col-md-8">
									<input type="text" name="in_auth_dt" id="in_auth_dt" maxlength="10" value="DD/MM/YYYY" onclick="clickclear(this, 'DD/MM/YYYY')" class="form-control" style="width: 85%;display: inline;"
										onfocus="this.style.color='#000000'" onblur="clickrecall(this,'DD/MM/YYYY');validateDate(this.value,this);" onkeyup="clickclear(this, 'DD/MM/YYYY')" 
										onchange="clickrecall(this,'DD/MM/YYYY')" aria-required="true" autocomplete="off" style="color: rgb(0, 0, 0);" />										
								</div>
							</div>
						</div>
					</div>
					<div class="col-md-12">
						<div class="col-md-6">
							<div class="row form-group">
								<div class="col-md-4">
									<label class=" form-control-label"> To SUS No </label>
								</div>
								<div class="col-md-8">
									<input type="text" id="i_to_sus_no" name="to_sus_no"  onkeyup="search_sus(this,'unit_nameIn1') ; specialcharecter(this)" tabindex="-1" class="form-control autocomplete" autocomplete="off" 
									maxlength="8" onchange="from_sus_check()" onkeypress="return AvoidSpace(event)">														
								</div>
							</div>
						</div>
						<div class="col-md-6">
							<div class="row form-group">
								<div class="col-md-4">
									<label class=" form-control-label">To Unit Name </label>
								</div>
								<div class="col-md-8">
									<input type="text" id="unit_nameIn1" name="unit_nameIn1" onkeyup="search_unit(this,'i_to_sus_no') ; specialcharecter(this)" tabindex="-1" 
									class="form-control autocomplete" autocomplete="off" maxlength="50" onchange="from_sus_check()" >														
								</div>
							</div>
						</div>
					</div>					 
					  <div class="col-md-12">
						<div class="col-md-6">
							<div class="row form-group">
								<div class="col-md-4">
									<label class=" form-control-label"> Date of TOS </label>
								</div>
								<div class="col-md-8">
										<input type="text" name="dt_of_tos" id="dt_of_tos" maxlength="10" value="DD/MM/YYYY" onclick="clickclear(this, 'DD/MM/YYYY')" class="form-control" style="width: 85%;display: inline;"
										onfocus="this.style.color='#000000'" onblur="clickrecall(this,'DD/MM/YYYY');validateDate_BackDate(this.value,this);" onkeyup="clickclear(this, 'DD/MM/YYYY')" 
										onchange="clickrecall(this,'DD/MM/YYYY')" aria-required="true" autocomplete="off" style="color: rgb(0, 0, 0);" />
								</div>
							</div>
						</div>
					  <!-- <div class="col-md-6" id=""  >
							<div class="row form-group">
								<div class="col-md-4">
									<strong style="color: red;"></strong><label class=" form-control-label">Remarks </label>
								</div>
								<div class="col-md-8">
									<label id="unit_description_IN"> </label>
								</div>
							</div>
						</div> -->
					</div> 
				</div>  					
					<div class="col-md-12">						 
						 <div class="col-md-6" id="stats" style="display: none">
							<div class="row form-group">
								<div class="col-md-4">
									<strong style="color: red;"> </strong><label class=" form-control-label">T Status </label>
								</div>
								<div class="col-md-8">
									<select name="t_status" id="t_status" class="form-control"   >
										<option value= "0">--Select--</option>
										<c:forEach var="item" items="${getstatusList}" varStatus="num">
										<option value="${item[0]}" name="${item[1]}">${item[1]}</option>
										</c:forEach>
									</select>
								</div>
							</div>
						</div>
						
					</div>
					 
				 <div class="col-md-12" id="xlist" style="display: none" >
					<div class="col-md-6">
							<div class="row form-group">
								<div class="col-md-4">
									<strong style="color: red;">
						 </strong><label class=" form-control-label"> X List SUS No </label>
								</div>
								<div class="col-md-8">
									 <input type="text"   id="x_sus_no" name="x_sus_no" value=""
										class="form-control autocomplete" maxlength="8" autocomplete="off"
										 onkeyup="return specialcharecter(this)" onkeypress="return AvoidSpace(event)">   
					  			 
								</div>
							</div>
						</div>
						<div class="col-md-6">
							<div class="row form-group">
								<div class="col-md-4">
									<strong style="color: red;">  </strong><label class=" form-control-label"> X List Loc </label>
								</div>
								<div class="col-md-8">
									 <textarea    id="x_list_loc" name="x_list_loc" value="" class="form-control autocomplete" 
									 maxlength="250" autocomplete="off" onkeyup="return specialcharecter(this)"></textarea>
								</div>
							</div>
						</div>
					</div>				  
				 </div>
				 <div id="postin_div" style="display:block;">
						<div class="card-footer" align="center" class="form-control">
							<a href="" class="btn btn-success btn-sm">Clear</a> <input
								type="button" class="btn btn-primary btn-sm" value="Save & Approve" onclick="save_postin();">
						</div>
						</div>
					</div>
					</form>
				</div>
		<!-- POST IN FORM END  -->	
		 		
			</div>
		</div>
				
				</div>

			</div>
		</div>
	</div>
</form:form>


<script>
var key = "${_csrf.parameterName}";
var value = "${_csrf.token}";
	function SetMin() {
		if ($("input#date_of_birth").val() != "") {

			var birth_dt = $("input#date_of_birth").val();
			setMinDate('date_of_commission', birth_dt);
			setMinDate('date_of_seniority', birth_dt);
			setMinDate('date_of_tosc', birth_dt);
			//setMinDate('date_of_rank', birth_dt);

		}
		if ($("input#date_of_commission").val() != "") {
			var comm_dt = $("input#date_of_commission").val();

			setMinDate('date_of_tosc', comm_dt);
			//setMinDate('date_of_rank', comm_dt);

		}
	}
	
	   document.getElementById('persnl_no1').addEventListener('change', function() {
		    $("input#persnl_no2").val("");
			$("input#persnl_no3").val("");
			document.getElementById("comm_div").style.display = "none";
			document.getElementById("button_div").style.display = "none";
			document.getElementById("postinout_div").style.display = "none";
			document.getElementById('type').value = '';
			
	    });

	   document.getElementById('persnl_no2').addEventListener('input', function() {
		   $("input#persnl_no3").val("");
			document.getElementById("comm_div").style.display = "none";
			document.getElementById("button_div").style.display = "none";
			document.getElementById("postinout_div").style.display = "none";
			 document.getElementById('type').value = '';
			
	    });
	function validate() {
		$.ajaxSetup({
			async : false
		});
		var dt_of_birth = $("#date_of_birth").val();

		var seniority = $("#date_of_seniority").val();

		var Tos = $("#date_of_tosc").val();

		var dt_rank = $("#date_of_rank").val();

		var dt_commission = $("#date_of_commission").val();

		patt2 = /^[a-zA-z]+([\s][a-zA-Z]+)*$/;
		if ($("input#authority").val().trim() == "") {
			alert("Please Enter Authority");
			$("input#authority").focus();
			return false;
		}

		if ($("input#date_of_authority").val() == ""
				|| $("#date_of_authority").val() == "DD/MM/YYYY") {
			alert("Please Select Authority Date");
			$("input#date_of_authority").focus();
			return false;
		}

		if ($("select#persnl_no1").val() == "-1"
				|| $("select#persnl_no1").val() == "0") {
			alert("Please Select Personal No");
			$("select#persnl_no1").focus();
			return false;
		}
		if ($("input#persnl_no2").val().trim() == "") {
			alert("Please Enter Personal No");
			$("input#persnl_no2").focus();
			return false;
		}
		var prs2 = $("input#persnl_no2").val();
		if (prs2.length != 5) {
			alert("Please Enter Valid Personal No");
			$("input#persnl_no2").focus();
			return false;
		}
		var result = Personal_no_already_exist();
		if (result == false) {
			$("select#persnl_no1").focus();
			return false;

		}

		if ($("input#cadet_no").val().trim() == "") {
			alert("Please Enter Cadet No");
			$("input#cadet_no").focus();
			return false;
		}
		if ($("input#batch_no").val().trim() == "") {
			alert("Please Enter Course No");
			$("input#batch_no").focus();
			return false;
		}
		if ($("select#course").val() == "0") {
			alert("Please Select Course");
			$("select#course").focus();
			return false;
		}
		if ($("input#namec").val().trim() == "") {
			alert("Please Enter Name");
			$("input#namec").focus();
			return false;
		}

		result2 = patt2.test($("input#namec").val());
		if (!result2) {
			alert("Name Should Only Contain Alphabet And Only One Space B/W Words");
			$("input#namec").focus();
			return false;
		}
		if ($("select#gender").val() == "0") {
			alert("Please Select Gender");
			$("select#gender").focus();
			return false;
		}
		if ($("select#type_of_comm_granted").val() == "0") {
			alert("Please Select Type of Commission Granted");
			$("select#type_of_comm_granted").focus();
			return false;
		}
		if ($("input#date_of_commission").val() == ""
				|| $("#date_of_commission").val() == "DD/MM/YYYY") {
			alert("Please Enter Date of Commission");
			$("input#date_of_commission").focus();
			return false;
		}

		dt_commission1 = dt_commission.substring(6, 10);
		dt_commission2 = dt_commission.substring(3, 5);
		dt_commission3 = dt_commission.substring(0, 2);

		if ($("#date_of_seniority").val() == ""
				|| $("#date_of_seniority").val() == "DD/MM/YYYY") {
			alert("Please Enter Date of Seniority");
			$("#date_of_seniority").focus();
			return false;
		}
		seniority1 = seniority.substring(6, 10);
		//26-01-1994
		/* if(getformatedDate($("#date_of_seniority").val()) < getformatedDate($("input#date_of_commission").val())) {
			alert("Date of Seniority can be greater than Date of Commission or equal to.");
			$("#date_of_seniority").focus();
			return false;
		} */

		if ($("select#rankc").val() == "0") {
			alert("Please Select Rank");
			$("select#rankc").focus();
			return false;
		}
		if ($("#date_of_rank").val() == ""
				|| $("#date_of_rank").val() == "DD/MM/YYYY") {
			alert("Please Select Date of Rank");
			$("#date_of_rank").focus();
			return false;
		}
		dt_rank1 = dt_rank.substring(6, 10);
		dt_rank2 = dt_rank.substring(3, 5);
		dt_rank3 = dt_rank.substring(0, 2);

		/*  if (parseInt(dt_commission1) != parseInt(dt_rank1) || parseInt(dt_commission2) != parseInt(dt_rank2)||parseInt(dt_commission3) != parseInt(dt_rank3)) {
			alert(" Date of Rank should be equals to Date of Commission ");
			$("#date_of_rank").focus();
			return false;
		}  */

		if (getformatedDate($("input#date_of_commission").val()) > getformatedDate($(
				"#date_of_rank").val())) {
			alert("Date of Rank should be greater Or equal to Commissioning Date");
			$("#date_of_rank").focus();
			return false;
		}

		if ($("#date_of_birth").val() == ""
				|| $("#date_of_birth").val() == "DD/MM/YYYY") {
			alert("Please Enter Date of Birth");
			$("#date_of_birth").focus();
			return false;
		}
		dt_of_birth1 = dt_of_birth.substring(6, 10);
		if (dt_of_birth1 > dt_commission1) {
			alert(" Date of Commission can not be less than Date of Birth ");
			$("#date_of_commission").focus();
			return false;
		}

		if (calculate_agediff(document.getElementById('date_of_birth'),
				document.getElementById('date_of_commission')) >= 16) {

		} else {
			alert("Commission Age Should Be 16 Or Above ");
			$("#date_of_commission").focus();
			return false;
		}

		if (dt_of_birth1 > seniority1) {
			alert(" Date of Seniority can not be less than Date of Birth ");
			$("#date_of_seniority").focus();
			return false;
		}
		if (dt_of_birth1 > dt_rank1) {
			alert(" Date of Rank can not be less than Date of Birth ");
			$("#date_of_rank").focus();
			return false;
		}

		if (calculate_agediff(document.getElementById('date_of_birth'),
				document.getElementById('date_of_rank')) >= 16) {

		} else {
			alert("Rank Age Should Be 16 Or Above ");
			$("#date_of_rank").focus();
			return false;
		}
		if ($("input#unit_sus_no").val() == "") {
			alert("Please Enter Unit Sus No");
			$("input#unit_sus_no").focus();
			return false;
		}
		if ($("input#unit_posted_to").val() == "") {
			alert("Please Enter Unit Posted To");
			$("input#unit_posted_to").focus();
			return false;
		}
		if ($("#date_of_tosc").val() == ""
				|| $("#date_of_tosc").val() == "DD/MM/YYYY") {
			alert("Please Enter Date of TOS");
			$("#date_of_tosc").focus();
			return false;
		}
		Tos1 = Tos.substring(6, 10);
		if (dt_of_birth1 > Tos1) {
			alert(" Date of TOS can not be less than Date of Birth ");
			$("#date_of_tosc").focus();
			return false;
		}

		if (getformatedDate($("#date_of_tosc").val()) < getformatedDate($(
				"input#date_of_commission").val())) {
			alert("Date of TOS can be greater than Date of Commission or equal to.");
			$("#date_of_tosc").focus();
			return false;
		}

		if (calculate_agediff(document.getElementById('date_of_birth'),
				document.getElementById('date_of_tosc')) >= 16) {

		} else {
			alert("TOS Age Should Be 16 Or Above ");
			$("#date_of_tosc").focus();
			return false;
		}

		if ($("select#parent_arm").val() == "0") {
			alert("Please Select  Parent Arm/Service ");
			$("select#parent_arm").focus();
			return false;
		}
		var sp14 = $("#parent_arm option:selected").text();

		$("#parent_armLb").val(sp14);
		if (($("select#parent_arm").val() == "0700" || $("select#parent_arm")
				.val() == "0800")
				&& $("select#regiment").val() == "0") {
			alert("Please Select Regiment");
			$("select#regiment").focus();
			return false;
		}
		//		else if(sp14 != "INFANTRY" && $("select#regiment").val() != "0"){
		//			alert("Please UnSelect Regiment");
		//			$("select#regiment").focus();
		//			return false;
		//		}

		return true;
	}

	jQuery(function($) {
		 // document.getElementById("left-panel").style.display = "none";
		  var element = document.querySelector('.ticker.dash-tic');

		// Set the display property to none
		if (element) {
		    element.style.display = 'none';
		}
		datepicketDate('date_of_rank');
		datepicketDate('date_of_commission');
		datepicketDate('date_of_seniority');
		datepicketDate('date_of_tosc');
		datepicketDate('date_of_birth');
		datepicketDate('date_of_authority');

	});

	// Unit SUS No

	$("#unit_sus_no")
			.keyup(
					function() {
						var sus_no = this.value;
						var susNoAuto = $("#unit_sus_no");

						susNoAuto
								.autocomplete({
									source : function(request, response) {
										$
												.ajax({
													type : 'POST',
													url : "getTargetSUSNoList?"
															+ key + "=" + value,
													data : {
														sus_no : sus_no
													},
													success : function(data) {
														var susval = [];
														var length = data.length - 1;
														var enc = data[length]
																.substring(0,
																		16);
														for (var i = 0; i < data.length; i++) {
															susval.push(dec(
																	enc,
																	data[i]));
														}
														var dataCountry1 = susval
																.join("|");
														var myResponse = [];
														var autoTextVal = susNoAuto
																.val();
														$
																.each(
																		dataCountry1
																				.toString()
																				.split(
																						"|"),
																		function(
																				i,
																				e) {
																			var newE = e
																					.substring(
																							0,
																							autoTextVal.length);
																			if (e
																					.toLowerCase()
																					.includes(
																							autoTextVal
																									.toLowerCase())) {
																				myResponse
																						.push(e);
																			}
																		});
														response(myResponse);
													}
												});
									},
									minLength : 1,
									autoFill : true,
									change : function(event, ui) {
										if (ui.item) {
											return true;
										} else {
											alert("Please Enter Approved Unit SUS No.");
											document
													.getElementById("unit_name").value = "";
											susNoAuto.val("");
											susNoAuto.focus();
											return false;
										}
									},
									select : function(event, ui) {
										var sus_no = ui.item.value;
										$.post(
												"getTargetUnitNameList?" + key
														+ "=" + value, {
													sus_no : sus_no
												}, function(j) {

												}).done(
												function(j) {
													var length = j.length - 1;
													var enc = j[length]
															.substring(0, 16);
													$("#unit_posted_to").val(
															dec(enc, j[0]));

												}).fail(
												function(xhr, textStatus,
														errorThrown) {
												});
									}
								});
					});

	// unit name
	$("input#unit_posted_to").keypress(function() {
		var unit_name = this.value;
		var susNoAuto = $("#unit_posted_to");
		susNoAuto.autocomplete({
			source : function(request, response) {
				$.ajax({
					type : 'POST',
					url : "getTargetUnitsNameActiveList?" + key + "=" + value,
					data : {
						unit_name : unit_name
					},
					success : function(data) {
						var susval = [];
						var length = data.length - 1;
						var enc = data[length].substring(0, 16);
						for (var i = 0; i < data.length; i++) {
							susval.push(dec(enc, data[i]));
						}

						response(susval);
					}
				});
			},
			minLength : 1,
			autoFill : true,
			change : function(event, ui) {
				if (ui.item) {
					return true;
				} else {
					alert("Please Enter Approved Unit Name.");
					document.getElementById("unit_posted_to").value = "";
					susNoAuto.val("");
					susNoAuto.focus();
					return false;
				}
			},
			select : function(event, ui) {
				var unit_name = ui.item.value;

				$.post("getTargetSUSFromUNITNAME?" + key + "=" + value, {
					target_unit_name : unit_name
				}, function(data) {
				}).done(function(data) {
					var length = data.length - 1;
					var enc = data[length].substring(0, 16);
					$("#unit_sus_no").val(dec(enc, data[0]));
				}).fail(function(xhr, textStatus, errorThrown) {
				});
			}
		});
	});

	// Parent SUS No

	$("#parent_sus_no")
			.keyup(
					function() {
						var sus_no = this.value;
						var susNoAuto = $("#parent_sus_no");

						susNoAuto
								.autocomplete({
									source : function(request, response) {
										$
												.ajax({
													type : 'POST',
													url : "getTargetSUSNoList?"
															+ key + "=" + value,
													data : {
														sus_no : sus_no
													},
													success : function(data) {
														var susval = [];
														var length = data.length - 1;
														var enc = data[length]
																.substring(0,
																		16);
														for (var i = 0; i < data.length; i++) {
															susval.push(dec(
																	enc,
																	data[i]));
														}
														var dataCountry1 = susval
																.join("|");
														var myResponse = [];
														var autoTextVal = susNoAuto
																.val();
														$
																.each(
																		dataCountry1
																				.toString()
																				.split(
																						"|"),
																		function(
																				i,
																				e) {
																			var newE = e
																					.substring(
																							0,
																							autoTextVal.length);
																			if (e
																					.toLowerCase()
																					.includes(
																							autoTextVal
																									.toLowerCase())) {
																				myResponse
																						.push(e);
																			}
																		});
														response(myResponse);
													}
												});
									},
									minLength : 1,
									autoFill : true,
									change : function(event, ui) {
										if (ui.item) {
											return true;
										} else {
											alert("Please Enter Approved Parent SUS No.");
											document
													.getElementById("parent_unit").value = "";
											susNoAuto.val("");
											susNoAuto.focus();
											return false;
										}
									},
									select : function(event, ui) {
										var sus_no = ui.item.value;
										$.post(
												"getTargetUnitNameList?" + key
														+ "=" + value, {
													sus_no : sus_no
												}, function(j) {

												}).done(
												function(j) {
													var length = j.length - 1;
													var enc = j[length]
															.substring(0, 16);
													$("#parent_unit").val(
															dec(enc, j[0]));

												}).fail(
												function(xhr, textStatus,
														errorThrown) {
												});
									}
								});
					});

	// Parent unit name
	$("input#parent_unit").keypress(function() {
		var unit_name = this.value;
		var susNoAuto = $("#parent_unit");
		susNoAuto.autocomplete({
			source : function(request, response) {
				$.ajax({
					type : 'POST',
					url : "getTargetUnitsNameActiveList?" + key + "=" + value,
					data : {
						unit_name : unit_name
					},
					success : function(data) {
						var susval = [];
						var length = data.length - 1;
						var enc = data[length].substring(0, 16);
						for (var i = 0; i < data.length; i++) {
							susval.push(dec(enc, data[i]));
						}

						response(susval);
					}
				});
			},
			minLength : 1,
			autoFill : true,
			change : function(event, ui) {
				if (ui.item) {
					return true;
				} else {
					alert("Please Enter Approved Parent Unit.");
					document.getElementById("parent_unit").value = "";
					susNoAuto.val("");
					susNoAuto.focus();
					return false;
				}
			},
			select : function(event, ui) {
				var unit_name = ui.item.value;

				$.post("getTargetSUSFromUNITNAME?" + key + "=" + value, {
					target_unit_name : unit_name
				}, function(data) {
				}).done(function(data) {
					var length = data.length - 1;
					var enc = data[length].substring(0, 16);
					$("#parent_sus_no").val(dec(enc, data[0]));
				}).fail(function(xhr, textStatus, errorThrown) {
				});
			}
		});
	});

	function calculate_age(obj) {

		var from_d = $("#" + obj.id).val();

		var from_d = $("#" + obj.id).val();
		from_d = from_d.replaceAll("/", "-");

		var from_d1 = from_d.substring(6, 10);
		var from_d2 = from_d.substring(3, 5);
		var from_d3 = from_d.substring(0, 2);
		var frm_d = from_d3 + "-" + from_d2 + "-" + from_d1;

		var today = new Date();
		var to_d3 = today.getDate();
		var to_d2 = today.getMonth() + 1;
		var to_d1 = today.getFullYear();
		var to_d0 = to_d3 + "-" + to_d2 + "-" + to_d1;
		if (to_d2 > from_d2 && to_d3 > from_d3 || to_d3 == from_d3) {
			var year = to_d1 - from_d1
			var month = to_d2 - from_d2
		}
		if (to_d2 > from_d2 && to_d3 < from_d3) {
			var year = to_d1 - from_d1
			var month = to_d2 - from_d2 - 1
		}
		if (from_d2 > to_d2) {
			var year = to_d1 - from_d1 - 1
			var month1 = from_d2 - to_d2
			var month = 12 - month1
		}
		if (from_d2 == to_d2 && from_d3 > to_d3) {
			var year = to_d1 - from_d1 - 1
			var days = from_d3 - to_d3
		}
		if (from_d2 == to_d2 && to_d3 > from_d3) {
			var year = to_d1 - from_d1
			var days = to_d3 - from_d3

		}
		if (from_d2 == to_d2 && to_d3 == from_d3) {
			var year = to_d1 - from_d1
			var days = 0
		}
		//days
		if (from_d2 > to_d2 && from_d3 > to_d3) {
			var m = from_d2 - to_d2
			var n = m * 30
			var m1 = from_d3 - to_d3
			var m2 = n + m1
			var days = m2
		}
		if (from_d2 > to_d2 && to_d3 > from_d3) {
			var m = from_d2 - to_d2
			var n = m * 30
			var m1 = to_d3 - from_d3
			var m2 = n + m1
			var days = m2
		}
		if (to_d2 > from_d2 && to_d3 > from_d3) {
			var m = to_d2 - from_d2
			var n = m * 30
			var m1 = to_d3 - from_d3
			var m2 = n + m1
			var days = m2

		}
		if (to_d2 > from_d2 && from_d3 > to_d3) {
			var m = to_d2 - from_d2
			var n = m * 30
			var m1 = from_d3 - to_d3
			var m2 = n + m1
			var days = m2

		}

		if (month == undefined) {
			month = 0;
		}

		if (year < 16) {
			alert("Please enter age above 16");
			$("#" + obj.id).val("");
		}
	}

	function onChangePerNo(obj) {
		var data = obj.value;

		if (data.length == 5) {

			var suffix = "";
			var summation = 6 * parseInt(data[0]) + 5 * parseInt(data[1]) + 4
					* parseInt(data[2]) + 3 * parseInt(data[3]) + 2
					* parseInt(data[4]);

			summation = parseInt(parseInt(summation) % 11);

			if (summation == 0) {
				suffix = "A";
			}
			if (summation == 1) {
				suffix = "F";
			}
			if (summation == 2) {
				suffix = "H";
			}
			if (summation == 3) {
				suffix = "K";
			}
			if (summation == 4) {
				suffix = "L";
			}
			if (summation == 5) {
				suffix = "M";
			}
			if (summation == 6) {
				suffix = "N";
			}
			if (summation == 7) {
				suffix = "P";
			}
			if (summation == 8) {
				suffix = "W";
			}
			if (summation == 9) {
				suffix = "X";
			}
			if (summation == 10) {
				suffix = "Y";
			}
			$.ajaxSetup({
				async : false
			});

			$("#persnl_no3").val(suffix);

			$.ajaxSetup({
				async : false
			});
			Personal_no_already_exist();
		}

	}

	function Personal_no_already_exist() {
    
		var persnl_no1 = $("select#persnl_no1").val();
		if (persnl_no1 == "-1") {
			alert("Please Select Personal Number Prefix.");
			$("select#persnl_no1").focus();
			return false;
		}
		var persnl_no2 = $("input#persnl_no2").val();
		if (persnl_no2.length != 5) {
			alert("Please Enter Personal Number.");
			$("input#persnl_no2").focus();
			return false;
		}
		var persnl_no3 = $("input#persnl_no3").val();
		if (persnl_no3.length != 1) {
			alert("Please Enter Personal Number.")
			$("input#persnl_no2").focus();
			return false;
		}
		var personnel_no = persnl_no1 + persnl_no2 + persnl_no3;		
		$('#personal_noc').val(personnel_no);	
     
		$.ajaxSetup({
			async : false
		});
		var data_result = true;
		var id = "0";
		$.post("getPersonnelNoAlreadyExist?" + key + "=" + value, {
			personnel_no : personnel_no,
			id : id
		}).done(function(j) {
			if (j == false) {
				
				$.post("getPersonnelNoAlreadyExistinpostinout?" + key + "=" + value, {
					personnel_no : personnel_no				
				}).done(function(j) {
					if (j == true) {						
						//var popupWindow = null
						//popupWindow = window.open("Posting_OutUrl_3008", "_blank", "toolbar=no,status=no,location=no,menubar=no,scrollbars=no,resizable=no,top=100,left=100,width=900,height=600,fullscreen=no");
						document.getElementById("comm_div").style.display = "none";
						document.getElementById("button_div").style.display = "none";
						document.getElementById("postinout_div").style.display = "block";
						document.getElementById("divforunitnote").style.display = "none";
						postinoutpageload();
						
					}
					else{
						
					 alert("Personal No already Exist.")
						$("select#persnl_no1").val("-1");
						$("input#persnl_no2").val("");
						$("input#persnl_no3").val("");
						document.getElementById("comm_div").style.display = "none";
						document.getElementById("button_div").style.display = "none";
						document.getElementById("postinout_div").style.display = "none";
						document.getElementById("divforunitnote").style.display = "none";
						data_result = false; 			
					}

				});
				/* alert("Personal No already Exist.")
				$("select#persnl_no1").val("-1");
				$("input#persnl_no2").val("");
				$("input#persnl_no3").val("");
				data_result = false; */
				//var popupWindow = null
				//popupWindow = window.open("Posting_OutUrl_3008", "_blank", "toolbar=no,status=no,location=no,menubar=no,scrollbars=no,resizable=no,top=100,left=100,width=900,height=600,fullscreen=no");
			/* 	document.getElementById("comm_div").style.display = "none";
				document.getElementById("button_div").style.display = "none";
				document.getElementById("postinout_div").style.display = "block";
				postinoutpageload(); */
				
			}
			else{
				var roleSusNo='${roleSusNo}';
				//alert(roleSusNo); 
	
				if(roleSusNo != "" ||  roleSusNo != 0){
					document.getElementById("divforunitnote").style.display = "block";					
					document.getElementById("noteforunit_id").innerHTML = "Please Contact MISO At 39861 Or Rise Ticket To Enter Commissioning Of dtls Of The OFFR In MISO Database";
			         return false;
				}else{
					document.getElementById("comm_div").style.display = "block";
					document.getElementById("button_div").style.display = "block";
					document.getElementById("postinout_div").style.display = "none";
					document.getElementById("divforunitnote").style.display = "none";
				}
						
			}

		});

		return data_result;
	}

	function date_of_com() {
		$("#date_of_commission").datepicker({
			maxDate : new Date()
		});
		alert("Future date are not allowed ");
	}

	function isNumber0_9Only(evt) {
		var charCode = (evt.which) ? evt.which : evt.keyCode;
		if (charCode != 46 && charCode > 31 && (charCode<48 || charCode>57)) {
			return false;
		} else {
			if (charCode == 46) {
				return false;
			}
		}
		return true;
	}

	function specialcharecterCadet(a) {
		var iChars = "@#^&*$,.:;%!+_-[]";
		var data = a.value;
		for (var i = 0; i < data.length; i++) {
			if (iChars.indexOf(data.charAt(i)) != -1) {
				alert("This " + data.charAt(i)
						+ " special characters not allowed.");
				a.value = "";
				return false;
			}
		}
		return true;
	}
</script>
<!-- postinout script start manav -->
<script>
function postinoutpageload(){	
	debugger;
	$.ajaxSetup({
		async : false
	});
	
	$("div#category_hide").hide();
	
	 if ( $('#type').val() == '' || $('#service_category').val() == '0') {
   	  $("#div_post_in").hide();
   	  $("#div_post_out").hide();
     }
	 
	 fn_service_category_change();	
	var roleSusNo='${roleSusNo}';

/* 	 if(roleSusNo!='' && roleSusNo!=null){
		$.post("getTargetUnitNameList?"+key+"="+value, {sus_no:roleSusNo}).done(function(data) {
	  		var l=data.length-1;
	  		var enc = data[l].substring(0,16);    	   	 
	  	 	$("#unit_nameIn1").val(dec(enc,data[0]));
	  	 	$("#unit_name").val(dec(enc,data[0]));
	  			
	  		}).fail(function(xhr, textStatus, errorThrown) {
	  });

		$('#i_to_sus_no').val(roleSusNo);
		$('#i_to_sus_no').attr('readonly',true);
		$('#from_sus_no').val(roleSusNo);
		$('#from_sus_no').attr('readonly',true);
		$('#unit_name').attr('readonly',true);
		$('#unit_nameIn1').attr('readonly',true);
	} */

	var personal_no = $('#personal_noc').val();	
	$.post("getunitsusno?"+key+"="+value, {personal_no:personal_no}).done(function(data) { 
	 	$("#sus_noc").val(data[0][1]);
		$("#unitnamec").val(data[0][0]);		
 });
	 
	
	   $('#type').on('change', function() {
		  
		       fn_service_category_change();
		      if ( $('#type').val() == 'postout'  && $('#service_category').val() != '0') {
		    	  debugger;
		    	  
		    	  $("#div_post_out").show();
		    	  $("#div_post_in").hide();	
		    	  $("#labelout_div").hide();
		    	  $("#postout_div").show();
		    	  $('#from_sus_no').val($('#sus_noc').val());	
		    	  $('#unit_name').val($('#unitnamec').val());	
		    	  $('#personnel_no').val($('#personal_noc').val());
		    	  fn_getOfficerData();
		    	 /*  var test =  $('#unit_name').val();
		    	  alert(test); */    	  
		    	 
		      }
		      if ( $('#type').val() == 'postin' && $('#service_category').val() != '0') {
		    	  debugger;
		    	  $("#div_post_in").show();
		    	  $("#div_post_out").hide();
		    	  $("#labelin_div").hide();
		    	  $("#postin_div").show();
		     	  $('#i_from_sus_no').val($('#sus_noc').val());
		     	  $('#in_personnel_no').val($('#personal_noc').val());
		     	  $('#unit_nameIn').val($('#unitnamec').val());	
		    	  fn_getOfficerCensusIn();
		   }
		      if ( $('#type').val() == '' || $('#service_category').val() == '0') {
		    	  $("#div_post_in").hide();
		    	  $("#div_post_out").hide();
		      }
		     
	 	});	
	   $('#service_category').on('change', function() {
		   fn_service_category_change();
		      if ( $('#type').val() == 'postout'  && $('#service_category').val() != '0') {
		    	  debugger;
		    	  $("#div_post_out").show();
		    	  $("#div_post_in").hide();
		    	  $("#labelout_div").hide();
		    	  $("#postout_div").show();
		    	  $('#from_sus_no').val($('#sus_noc').val());
		    	  $('#unit_name').val($('#unitnamec').val()); 
		    	  $('#personnel_no').val($('#personal_noc').val());
		    	  fn_getOfficerData();
		    	  
		    	  
		      }
		      if ( $('#type').val() == 'postin' && $('#service_category').val() != '0') {
		    	  debugger;
		    	  $("#div_post_in").show();
		    	  $("#div_post_out").hide();
		    	  $("#labelin_div").hide();
		    	  $("#postin_div").show();
		    	  $('#i_from_sus_no').val($('#sus_noc').val());
		    	  $('#unit_nameIn').val($('#unitnamec').val());	
		    	  $('#in_personnel_no').val($('#personal_noc').val());
		    	  fn_getOfficerCensusIn();
		      }
		      if ( $('#type').val() == '' || $('#service_category').val() == '0') {
		    	  $("#div_post_in").hide();
		    	  $("#div_post_out").hide();
		      }
		     
	 	});	
	   
	   jQuery(function($){ //on document.ready 
		 
		  	 datepicketDate('out_auth_dt1');
		   	 datepicketDate('out_auth_dt');
			 datepicketDate('dt_of_sos');
			 datepicketDate('dt_of_tos');
			 datepicketDate('in_auth_dt');				 
			 datepicketDate('app_dt');
			
		});   

		try{
			if(window.location.href.includes("msg=")){
				var url = window.location.href.split("?")[0];
			    window.location = url;
		    } 
		}catch (e) {
			// TODO: handle exception
		}
		
		
	   
}

</script>

<script>
 //post in start
 //post in save
	function save_postin() {
	 debugger;
		$('#in_auth').val($('#authority').val());
		$('#in_auth_dt').val($('#date_of_authority').val());
		var personnel_no = $('#in_personnel_no').val();
		var rank = $('#rank_in').val();
		var from_sus_no = $('#i_from_sus_no').val();
		var to_sus_no = $('#i_to_sus_no').val();
		var app_name = $('#app_in').val();

		var dt_of_tos = $('#dt_of_tos').val();
		var t_status = $('#t_status').val();
		var x_sus_no = $('#x_sus_no').val();
		var x_list_loc = $('#x_list_loc').val();
		var comm_id = $('#comm_id').val();
		var census_id = $('#census_id').val();
		var i_id = $('#i_id').val();
		var in_auth = $('#in_auth').val();
		var in_auth_dt = $('#in_auth_dt').val();;
						 
		if ($("input#i_from_sus_no").val() == "") {
			alert("Please Enter From Sus No");
			$("input#i_from_sus_no").focus();
			return false;
		}	
		if ($("input#in_personnel_no").val() == "") {
			alert("Please Enter Personal No");
			$("input#in_personnel_no").focus();
			return false;
		}
		if ($("input#in_auth").val().trim() == "") {
			alert("Please Enter Auth No");
			$("input#in_auth").focus();
			return false;
		}	
		if ($("input#in_auth_dt").val() == "") {
			alert("Please Enter Auth Date");
			$("input#date_of_authority").focus();
			return false;
		}
		if ($("input#i_to_sus_no").val() == "") {
			alert("Please Enter  To SUS No ");
			$("input#i_to_sus_no").focus();
			return false;
		}
		if ($("input#unit_nameIn1").val() == "") {
			alert("Please Enter  To Unit Name ");
			$("input#unit_nameIn1").focus();
			return false;
		}
		if($("#dt_of_tos").val()== "DD/MM/YYYY"){
			 alert("Please Enter TOS Date");
			 $("input#dt_of_tos").focus();
			 return false;
		 }
		
		
		    
		
		
		if ($("input#dt_of_tos").val() == "") {
			alert("Please Enter Date of TOS");
			$("input#dt_of_tos").focus();
			return false;
		}
		
		if(dt_tos!=null && dt_tos!=""){						 
			var newtos = dt_of_tos.split("/");
			var pretos=dt_tos.split("/");			
			var newtosM=newtos[1];
			var newtosY=newtos[2];			
			var pretosM=pretos[1];
			var pretosY=pretos[2];
			
			if(newtosY==pretosY){
				if(newtosM<=pretosM){
					alert("Invalid Date of Tos");
					$("input#dt_of_tos").focus();
					return false;
				}
			}
			else if(newtosY<pretosY){
				alert("Invalid Date of Tos");
				$("input#dt_of_tos").focus();
				return false;
			}
		}
			
		
		if(comm_date!=''){
			if(getformatedDate(in_auth_dt) < getformatedDate(comm_date)) {
				alert("Date of Auth Should Be Greater Then Date of Commission");
				$("input#in_auth_dt").focus();
				return false;
			}
		}
 
		if(comm_date!=''){
			if(getformatedDate(dt_of_tos) <= getformatedDate(comm_date)) {
				alert("TOS Should Be Greater Or Equal To Date Of Commission");
				$("input#dt_of_tos").focus();
				return false;
			}
		}
		
		var prefix_per = $("#in_personnel_no").text().substring(0,2);
		var appname = $("#app_name").val();
		 if (prefix_per == "NT" && $("#t_status").val() == "" ) {
	 		 alert("Please Select The Status");
	 		 $("#t_status").focus();
	 		 return false;
	 		 }
		
		if( $("#x_sus_no").val() == "" &&  appname == "1" || appname == "ON COURSE ABROAD" || appname == "ON COURSE EXCEEDING 10 WEEKS" 
				|| appname == "ON DEPUTATION" || appname == "ON FURLOUGH LEAVE" || appname == "ON LEAVE PENDING RETIREMENT R/R" 
				|| appname == "ON STUDY LEAVE"  ){
			 alert("Please Enter The X Sus No");
	 		 $("#x_sus_no").focus();
	 		 return false;	
		} 
			if($("#x_list_loc").val() == "" && appname == "1" || appname == "ON COURSE ABROAD" || appname == "ON COURSE EXCEEDING 10 WEEKS" 
				|| appname == "ON DEPUTATION" || appname == "ON FURLOUGH LEAVE" || appname == "ON LEAVE PENDING RETIREMENT R/R" 
				|| appname == "ON STUDY LEAVE" ){
			 alert("Please Enter The X Location");
				 $("#x_list_loc").focus();
				 return false;	
		}
			
		var saveUrl;
		if($('#service_category').val()=='1'){
			saveUrl='posting_in_action_3008?'
		}
		else if($('#service_category').val()=='2'){
			saveUrl='posting_in_actionJCO?'
			
		}
		
		$.post(saveUrl + key + "=" + value, {personnel_no : personnel_no,	rank : rank, from_sus_no : from_sus_no , to_sus_no : to_sus_no, 
			app_name : app_name,dt_of_tos : dt_of_tos,t_status : t_status,x_sus_no :x_sus_no,x_list_loc :x_list_loc,
			comm_id : comm_id,census_id : census_id,i_id : i_id	,in_auth : in_auth,in_auth_dt : in_auth_dt},
				function(data) {
         
			if (data == "update")
				alert("Data Updated Successfully");

			else if (parseInt(data) > 0) {
				alert("Data saved successfully.");
				document.getElementById("postinout_div").style.display = "none";			
				 $("input#persnl_no2").val("");
			     $("input#persnl_no3").val("");				
			     $("input#persnl_no1").val("");
			} else
				alert(data);
					
		}).fail(function(xhr, textStatus, errorThrown) {
			alert("fail to fetch")
		});

		return true;
	}
  
	//X SUS No

	$("#x_sus_no").keyup(function(){
		var sus_no = this.value;
		var susNoAuto=$("#x_sus_no");

		susNoAuto.autocomplete({
		      source: function( request, response ) {
		        $.ajax({
		        type: 'POST',
		        url: "getTargetSUSNoList_postin?"+key+"="+value,
		        data: {sus_no:sus_no},
		          success: function( data ) {
		        	  var susval = [];
	                  var length = data.length-1;
	                  var enc = data[length].substring(0,16);
	                        for(var i = 0;i<data.length;i++){
	                                susval.push(dec(enc,data[i]));
	                        }
	                        var dataCountry1 = susval.join("|");
	                        var myResponse = []; 
					        var autoTextVal=susNoAuto.val();
					$.each(dataCountry1.toString().split("|"), function(i,e){
						var newE = e.substring(0, autoTextVal.length);
						if (e.toLowerCase().includes(autoTextVal.toLowerCase())) {
						  myResponse.push(e);
						}
					});      	          
					response( myResponse ); 
		          }
		        });
		      },
			  minLength: 1,
		      autoFill: true,
		      change: function(event, ui) {
		    	 if (ui.item) {   	        	  
		        	  return true;    	            
		          } else {
		        	  alert("Please Enter Approved Unit SUS No.");
		        	  document.getElementById("unit_name").value="";
		        	  susNoAuto.val("");	        	  
		        	  susNoAuto.focus();
		        	  return false;	             
		          }   	         
		    }, 
			select: function( event, ui ) {
				var sus_no = ui.item.value;			      	
				 $.post("getTargetUnitNameList?"+key+"="+value, {
					 sus_no:sus_no
	         }, function(j) {
	                
	         }).done(function(j) {
	        	 var length = j.length-1;
	             var enc = j[length].substring(0,16);
	             $("#unit_posted_to").val(dec(enc,j[0]));   
	                 
	         }).fail(function(xhr, textStatus, errorThrown) {
	         });
			} 	     
		});	
	});
	 

 ///post in end
</script>
<script>
	function appNamechng(){
		 
		var appname = $("#app_name").val();
		  
			if(appname == "1" || appname == "ON COURSE ABROAD" || appname == "ON COURSE EXCEEDING 10 WEEKS" 
					|| appname == "ON DEPUTATION" || appname == "ON FURLOUGH LEAVE"
					|| appname == "ON LEAVE PENDING RETIREMENT R/R" || appname == "ON STUDY LEAVE"){
				$("#xlist").show();
				}
			else{
				$("#xlist").hide();
				$("#x_sus_no").val("");
				$("#x_list_loc").val("");
			 
		}
	}
// 	function statusPER(){
		 
// 		var prefix_per = $("#in_personnel_no").val().substring(0,2);
		 
// 			if(prefix_per == "NT"){
// 				 $("#stats").show();
// 				}
// 			else{
// 				 $("#stats").hide();
// 				 $("#t_status").val("");
// 			}
	 	
// 	}
	function removeMinDate(){
		
		setMinDate('out_auth_dt', '01/01/1890');
		setMinDate('in_auth_dt', '01/01/1890');
		setMinDate('dt_of_sos', '01/01/1890');
		setMinDate('dt_of_tos', '01/01/1890');
		
	}
	function To_sus_check() {
		 var to_sus_no = $('#o_to_sus_no').val(); 
		 var from_sus_no = $('#from_sus_no').val(); 
		
		
		if(to_sus_no==from_sus_no && to_sus_no!='' && from_sus_no!=''){
	
			alert("From And To Sus Can't Be Same");
			$('#o_to_sus_no').val('');
			$('#unit_name1').val('');
		}
		
		if(from_sus_no=='' ||  $('#unit_name').val()==''){
			 $("#in_personnel_no").val('');
			 $("#personnel_no").val('');
		}
		
		}
	function from_sus_check() {
		
		var from_sus_no = $('#i_from_sus_no').val(); 
		var to_sus_no = $('#i_to_sus_no').val(); 
		
	if(from_sus_no==to_sus_no && to_sus_no!='' && from_sus_no!='')	 {
		
		alert("From And To Sus Can't Be Same");
		if('${roleSusNo}'!='' && '${roleSusNo}'!=null){
			 $('#i_from_sus_no').val(''); 
			 $('#unit_nameIn').val(''); 
		}
		else{
		$('#i_to_sus_no').val('');
		$('#unit_nameIn1').val('');
		}
	}
	if(from_sus_no=='' ||  $('#unit_nameIn').val()==''){
		 $("#in_personnel_no").val('');
		 $("#personnel_no").val('');
	}
}
</script>

<script>
	//postout save
	function save_postout() {
		$('#out_auth').val($('#authority').val());
		$('#out_auth_dt').val($('#date_of_authority').val());
		var personnel_no = $('#personnel_no').val();
		var name = '${name}';
		var rank = $('#rank1').val();	 
		var out_auth = $('#out_auth').val();
		var out_auth_dt = $('#out_auth_dt').val();
		var to_sus_no = $('#o_to_sus_no').val();
		var from_sus_no = $('#from_sus_no').val();
 		var dt_of_sos = $('#dt_of_sos').val();
		var comm_id = $('#comm_id').val();
		var census_id = $('#census_id').val();
		var unit_description = $('#unit_description_out').val();
		var t_status_out = $('#t_status_out').val();
		
		
		
		

		var h_id = $('#h_id').val();
		if($('#service_category').val()=='0'){
			alert("Please Select Category");
			$("#service_category").focus();
			return false;
		}
 
		var out_auth_dt = $('#out_auth_dt').val();
		if ($("input#personnel_no").val() == "") {
			alert("Please Enter Personal No");
			$("input#personnel_no").focus();
			return false;
		}		
		if ($("input#out_auth").val().trim()  == "") {
			alert("Please Enter Auth No");
			$("input#out_auth").focus();
			return false;
		}
		 if($("#out_auth_dt").val().trim() == "DD/MM/YYYY"){
			 alert("Please Enter Auth Date");
			 $("input#out_auth_dt").focus();
			 return false;
		 }
		if ($("input#out_auth_dt").val().trim()  == "") {
			alert("Please Select Date of Auth");
			$("input#out_auth_dt").focus();
			return false;
		}
		if ($("input#o_to_sus_no").val() == "") {
			alert("Please Select Unit SUS No");
			$("input#o_to_sus_no").focus();
			return false;
		}			 
		if($("#dt_of_sos").val()== "DD/MM/YYYY"){
			alert("Please Select Date of SOS");
			$("input#dt_of_sos").focus();
			return false;
		 }
		if ($("input#dt_of_sos").val() == "") {
			alert("Please Select Date of SOS");
			$("input#dt_of_sos").focus();
			return false;
		}
		
	if(dt_tos!=null && dt_tos!=""){

		
			var newtos = dt_of_sos.split("/");
			var pretos=dt_tos.split("/");
			
			var newtosM=Number(newtos[1]);
			var newtosY=newtos[2];
			
			var pretosM=Number(pretos[1]);
			var pretosY=pretos[2];
			
			if(newtosY==pretosY){
				if(newtosM<=pretosM){
					alert("Invalid Date of SOS");
					$("input#dt_of_sos").focus();
					return false;
				}
			}
			else if(newtosY<pretosY){
				alert("Invalid Date of SOS");
				$("input#dt_of_sos").focus();
				return false;
			}
		}
		
		
		
		if ($("input#out_auth_dt").val() == "") {
			alert("Please Select Date of Auth");
			$("input#out_auth_dt").focus();
			return false;
		}
		if(comm_date!=''){
			if(getformatedDate(out_auth_dt) < getformatedDate(comm_date)) {
				alert("Date of Auth Should Be Greater Then Date of Commission");
				$("input#out_auth_dt").focus();
				return false;
			}
		}
		if(dt_tos!=''){
			if(getformatedDate(dt_of_sos) < getformatedDate(dt_tos)) {
				alert("SOS Should Be Greater Then TOS");
				$("input#dt_of_sos").focus();
				return false;
			}
		}
		if(comm_date!=''){
			if(getformatedDate(dt_of_sos) < getformatedDate(comm_date)) {
				alert("SOS Should Be Greater Then Date of Commission");
				$("input#dt_of_sos").focus();
				return false;
			}
		}
		
	 var saveUrl;
		if($('#service_category').val()=='1'){
			saveUrl='posting_out_action_3008?'
		}
		else if($('#service_category').val()=='2'){
			saveUrl='posting_out_actionJCO?'
			
		}
		
		$.post(saveUrl + key + "=" + value, {unit_description:unit_description,from_sus_no:from_sus_no,personnel_no : personnel_no,rank:rank, to_sus_no : to_sus_no,out_auth : out_auth,out_auth_dt : out_auth_dt,dt_of_sos : dt_of_sos,comm_id : comm_id,census_id : census_id,t_status:t_status_out,h_id : h_id	},
				function(data) {
         
			if (data == "update")
				alert("Data Updated Successfully");

			else if (parseInt(data) > 0) {
				alert("Data saved successfully.");			
				document.getElementById("postinout_div").style.display = "none";			
				 $("input#persnl_no2").val("");
			     $("input#persnl_no3").val("");				
			     $("input#persnl_no1").val("");
			} else
				alert(data);
		}).fail(function(xhr, textStatus, errorThrown) {
			alert("fail to fetch")
		});

		return true;
	}
////out Personal No

	function getPersonnel_no(obj,id) {
		removeMinDate();
		roleSus=$("#"+id).val();
		
		if(roleSus!=''){
		var personel_no = obj.value;
		var susNoAuto = $("#"+obj.id);
		var perurl;
		if($('#service_category').val()=='1'){
			
			
			perurl='getpersonnel_noListApprovedcomm?';
		}
		else if($('#service_category').val()=='2'){
		
			perurl='getArmy_noListApproved?';
		}
		susNoAuto.autocomplete({
			source : function(request, response) {
				$.ajax({
					type : 'POST',
					url : perurl + key + "=" + value,
					data : {
						personel_no : personel_no,army_no:personel_no,roleSus:roleSus
					},
					success : function(data) {
						var susval = [];
						var length = data.length - 1;
						var enc = data[length].substring(0, 16);
						for (var i = 0; i < data.length; i++) {
							susval.push(dec(enc, data[i]));
						}

						response(susval);
					}
				});
			},
			minLength : 1,
			autoFill : true,
			change : function(event, ui) {
				if (ui.item) {
					return true;
				} else {
					alert("Please Enter Approved Personal No");
					;
					susNoAuto.val("");
					susNoAuto.focus();
					return false;
				}
			},
			select : function(event, ui) {

			}
		});
		}
		else{
			alert("please Enter From Sus");
			
			$("#"+id).focus();
			$("#"+id).val('');
			}
		}

	var census_id = null;
	function personal_number() {

			if($('#service_category').val()=='1'){
				fn_getOfficerData();
				
			}
			else if($('#service_category').val()=='2'){
				fn_getJcoData();
				
			}
			
		
		
	}
	//////// post out end
	
	var dt_tos='';
	var app_date='';
	var comm_date='';
	function fn_getJcoData(){
		
		
		census_id = $('#census_id').val();
		 
		var personnel_no = $("input#personnel_no").val();
		if (personnel_no != "") {
			
			var	perurl='GetArmyNoDataNoData?';
			
			
		
			$.post(perurl + key + "=" + value, {
				army_no:personnel_no
			}, function(j) {

				var comm_id = j[0][0];
					 var	 cpurl='GetJCODataApprove?'
	
				$("#comm_id").val(comm_id);

				$.post(cpurl + key + "=" + value,{ id : comm_id },function(k) {
		    		 if(k.length > 0)
		    		 {
						
							if(k[0][17] != "1")	
							{
								
								alert("Individual Record is still Pending for Approval.Pl Notify the OC/CO of Unit to Approve all Pending Records in Update JCO/OR Form.");
								$("input#personnel_no").val("");
								$("#name").text("");
								$("#rank").text("");
								$("#out_app_name").text("");
								$("#app_dt").text("");0
							}
							else
							{
								$("#census_id").val(k[0][1]);
								//alert(k[0][2]);
			    			  	$("#name").text(k[0][2]);
			    			   	$("#rank").text(k[0][3]);
			    			 
			    		    	$("#out_app_name").text(k[0][4]);
			    		    
			    		    	if(k[0][5] != null)
			    		    	{
			    		    		$("#app_dt").text(convertDateFormate(k[0][5]));
			    		    	}
		    		    
			    		    	var sus_no =k[0][7];
		    		
						if(sus_no!=null){
							getunit(sus_no);
						
		    		    	function getunit(val) {	
		    		            $.post("getTargetUnitNameList?"+key+"="+value, {
		    		            	sus_no : sus_no
		    		        }, function(j) {
		    		                //var json = JSON.parse(data);
		    		                //...

		    		        }).done(function(j) {
		    		    				   var length = j.length-1;
		    		    	                   var enc = j[length].substring(0,16); 
		    		    	                   //alert("unit---" + dec(enc,j[0]));
		    		    	                   $("#app_unit_name").text(dec(enc,j[0])); 
		    		        }).fail(function(xhr, textStatus, errorThrown) {
		    		        });
		    		    } 
		    		    
						}
						 }	 
		    		 }
		    		
		   });
			});
		}
		$("input#personnel_no").attr('readonly', false);
	}
	
	function fn_getOfficerData(){
		
		
		census_id = $('#census_id').val();
		 
		var personnel_no = $("input#personnel_no").val();
		if (personnel_no != "") {			 
	
			var	perurl='GetPersonnelNoData?';	
			
		
			$.post(perurl + key + "=" + value, {
				personnel_no : personnel_no
			}, function(j) {

				var comm_id = j[0][0];
				var	 cpurl='GetCommDataApprove?';
	
/* ////GetCensusDataApprove (old method(cpurl)) */

				$("#comm_id").val(comm_id);
				$.post('GETPosttenure_date?' + key + "=" + value,{ comm_id : comm_id },function(k) {
			   		 if(k.length > 0){
				   			$('#date_of_tos').val(k[0][0]);
				   			$('#dt_of_sos').val(k[0][0]);
				   			
				   			setMinDate('date_of_tos',k[0][0]);
				   			setMinDate('dt_of_sos', k[0][0]);
				   			
			   		 }	
			   		 else
			   		 {
			   			setMinDate('dt_of_sos', '01/01/1890');
			   			setMinDate('dt_of_tos', '01/01/1890');
			   		 }
			   		 
			       });
				$.post('checkrole_hdr_status?' + key + "=" + value,{ comm_id : comm_id },function(rstatus) {
					
					if(rstatus.pass=="1"){
						
				$.post(cpurl + key + "=" + value,{ comm_id : comm_id},function(k) {
					
		    		 if(k.length > 0 )
		    		 {
						
					
							 if(k[0][18] != "1")	
							{
								
							const message="Individual Record is still Pending for Approval. Pl Notify the Approver to Approve all Pending Records in Update Data.";
							labelshowout(message);
								/* $("input#personnel_no").val("");
								$("#name").text("");
								$("#rank").text("");
								$("#out_app_name").text("");
								$("#app_dt").text(""); */
							}
							else
							{ 
								
			    			  	$("#name").text(k[0][1]);
			    			   	$("#rank").text(k[0][3]);
			    			 
			    		    	$("#out_app_name").text(k[0][4]);
			    		    
			    		    	if(k[0][5] != null)
			    		    	{
			    		    		$("#app_dt").text(convertDateFormate(k[0][5]));
			    		    		app_date=ParseDateColumncommission(k[0][5]);
			    		    	}
			    		    	else{
			    		    		app_date='';
			    		    	}
			    		    	if(k[0][10] == "TERRITORIAL ARMY")
			    		    	{
			    		    		$("#stats_out").show();
			    		    	}else{
			    		    		$("#stats_out").hide();
			    		    	}
			    		    	$("#census_id").val(k[0][1]);
			    		    	if(k[0][6] != null)
			    		    	{
			    		    		
			    		    		 		dt_tos=ParseDateColumncommission(k[0][6]);
			    		    		 		

			    		    	}
			    		    	else{
			    		    		
			    		    		dt_tos='';
			    		    	}
			    		    	
			    		    	if(k[0][12] != null)
			    		    	{
			    		    		comm_date=ParseDateColumncommission(k[0][12]);
			    		    		
			    		    		
			    		    		setMinDate('out_auth_dt', comm_date);
			    		    		setMinDate('in_auth_dt', '01/01/1890');
			    		    		
			    		    	}
			    		    	else{
			    		    		comm_date='';
			    		    	}
			    		    
			    		    
			    		    var sus_no =k[0][7];
			    		    
// 			    		    $('#from_sus_no').val(sus_no);
// 			    		    $('#from_sus_no').prop('readonly',true);
						
						
		    		
						if(sus_no!=null){
							getunit(sus_no);
						
		    		    	function getunit(val) {	
		    		            $.post("getTargetUnitNameList?"+key+"="+value, {
		    		            	sus_no : sus_no
		    		        }, function(j) {
		    		                //var json = JSON.parse(data);
		    		                //...

		    		        }).done(function(j) {
		    		    				   var length = j.length-1;
		    		    	                   var enc = j[length].substring(0,16); 
		    		    	                 
		    		    	                   $("#app_unit_name").text(dec(enc,j[0])); 
		    		    	                   $('#unit_name').text(dec(enc,j[0]));
		    		    	                 
		    		        }).fail(function(xhr, textStatus, errorThrown) {
		    		        });
		    		    } 
		    		    
						}
						 }	
		    		 }

		    		/*  $.post('CheckPersonnelNoDataIncensus?' + key + "=" + value,{ comm_id : comm_id },function(response) {
		    		    			  if (response && response.length > 0) {	
		    		 				    	alert("This personal number fill  the census form, so please add this data to With census. ");
		    		 				    	$("input#personnel_no").val("");
		    								$("#name").text("");
		    								$("#rank").text("");
		    								$("#out_app_name").text("");
		    								$("#dt_of_sos").text("");
		    								$("#dt_of_sos").val("");
		    								
		    		 				    }	
		    		    				   							   		 
		    				      });  */
		    				      
		    				      $.post('CheckPersonnelNoData?' + key + "=" + value, {
		    							personnel_no : personnel_no
		    						}, function(j) {		    							
		    							if(j.length!=0){
		    								if(j[0][1]=='4'){	  									
		    									const message ="Offcr In Non-Effective State";					
		    									labelshowout(message);
		    									return false;
		    								}
		    							}		    							
		    							  });
		    				      $.post('check_prsonalno_in_comm_update?' + key + "=" + value, { comm_id: comm_id }, function(response) {
			 		    			    if (response === 0) {  
			 		    			      const message = "Individual Record is still Pending for Approval. Please notify the Approver to Approve Pending Record in .";
			 		    			     labelshowout(message);
			 		    			        /* $("input#personnel_no").val("");
			 								$("#name").text("");
			 								$("#rank").text("");
			 								$("#out_app_name").text("");
			 								$("#dt_of_sos").text("");
			 								$("#dt_of_sos").val(""); */
			 		    			    }
			 		    			});
		    		 /* $.post('check_prsonalno_in_update?' + key + "=" + value, { comm_id: comm_id }, function(response) {
		    			    if (response === 0) {  
		    			        const message ="Individual Record is still Pending for Approval. Please notify the Approver to Approve Pending Record in census Form Or Update Officer Form.";
		    			        labelshowout(message);
		    			        /* $("input#personnel_no").val("");
								$("#name").text("");
								$("#rank").text("");
								$("#out_app_name").text("");
								$("#dt_of_sos").text("");
								$("#dt_of_sos").val("");
		    			    }
		    			}); */
		      

		    		
		   });
					}
					else{
						alert(rstatus.error);
						$("input#personnel_no").val("");
						$("#name").text("");
						$("#rank").text("");
						$("#out_app_name").text("");
						$("#app_dt").text("");
						return false;
					}
				 });
			});
		}
		
		
		$("input#personnel_no").attr('readonly', false);
	}
	
	function fn_getOfficerCensusIn(){
		debugger;
		census_id = $('#census_id').val();
		 
		var personnel_no = $("input#in_personnel_no").val();
		if (personnel_no != "") {
			
		
			$.post('CheckPersonnelNoData?' + key + "=" + value, {
				personnel_no : personnel_no
			}, function(j) {
				debugger;
				if(j.length==0){
					alert("Please Enter Valid Personal No.");
					$("input#in_personnel_no").val('');
					return false;
				}
				else{
					if(j[0][1]=='4'){
						/* alert("Offcr In Non-Effective State");
						$("input#in_personnel_no").val('');
						return false; */
						
						const message ="Offcr In Non-Effective State";					
						labelshow(message);
						return false;
					}
					if(j[0][1]!='1' && j[0][1]!='5'){
						const message ="Individual Record is still Pending for Approval. Pl Notify the OC/CO of Unit to Approve all Pending Records in Update Data.";
						//$("input#in_personnel_no").val('');
						labelshow(message);
						return false;
					
					}
					if(j[0][1]=='1' && j[0][2]!='1'){
						const message ="Individual Record is still Pending for Approval.Pl Contact MISO At 39861 or Raise Ticket.";
						//$("input#in_personnel_no").val('');
						labelshow(message);
						return false;
					}
				}
				var comm_id = j[0][0];
				$("#comm_id").val(comm_id);
				$.post('checkrole_hdr_status?' + key + "=" + value,{ comm_id : comm_id },function(rstatus) {
				if(rstatus.pass=="1"){
					//02052023(new encement postin out by comm)
				$.post('GetCommDataApprove?' + key + "=" + value,{ comm_id : comm_id },function(k) {
		    		 if(k.length > 0)
		    		  {
		    			 if(k[0][18] != "1")	
							{
								debugger;
								const message = "Individual Record is still Pending for Approval. Pl Notify the OC/CO of Unit to Approve all Pending Records in Update Data.";
								labelshow(message);
								//$("input#in_personnel_no").val("");
								//$("#iname").text("");
								//$("#rank2").text("");
								//$("#app_name").text("");
								//$("#app_dt").text("");
							}
							else 
							{
		    			 
// 								$.post('getLastApprovePostINOut?' + key + "=" + value,{ comm_id : comm_id },function(p) {
									
									
// 								});
		    			 
		    			  	$("#iname").text(k[0][1]);
		    			   	$("#rank2").text(k[0][3]);
		    			 
		    		    	$("#app_name").text(k[0][4]);
		    		    	//$("#app_dt").text(k[0][5]);
		    		    
		    		    	if(k[0][5] != null)
		    		    	{
		    		    		$("#app_dt").text(convertDateFormate(k[0][5]));
		    		    	}
		    		    	if(k[0][12] != null)
		    		    	{
		    		    		comm_date=ParseDateColumncommission(k[0][12]);
		    		    		
		    		    		setMinDate('dt_of_sos', '01/01/1890');
		    		    		setMinDate('out_auth_dt', '01/01/1890');
		    		    		setMinDate('in_auth_dt', comm_date);
		    		    		setMinDate('dt_of_tos', comm_date);
		    		    	}
		    		    	else{
		    		    		comm_date='';
		    		    	}
		    		    	
		    		    	if(k[0][23] != null){
		    		    		$('#unit_description_IN').text(k[0][23]);
		    		    	}
		    		    	if(k[0][6] != null)
		    		    	{
		    		    		
		    		    		dt_tos=ParseDateColumncommission(k[0][6]);
		    		    		
		    		    	}
		    		    	else{
		    		    		
		    		    		dt_tos='';
		    		    	}
		    		    	

		    		    	if(k[0][10] == "TERRITORIAL ARMY")
		    		    	{
		    		    		$("#stats").show();
		    		    	}else{
		    		    		$("#stats").hide();
		    		    	}
	    		    		
		    		    	$("#census_id").val(k[0][1]);
		    		     
		    		    
		    		    	var sus_no =k[0][7];
		    		    	if(sus_no!='${roleSusNo}'){
// 			    		    	$('#i_from_sus_no').val(sus_no);
// 			    		    	$('#i_from_sus_no').prop('readonly',true);
			    		    	getunit(sus_no);
		    		    	function getunit(val) {	
		    		            $.post("getTargetUnitNameList?"+key+"="+value, {
		    		            	sus_no : sus_no
		    		        }, function(j) {
		    		                //var json = JSON.parse(data);
		    		                //...

		    		        }).done(function(j) {
		    		    				   var length = j.length-1;
		    		    	                   var enc = j[length].substring(0,16); 
		    		    	                  
		    		    	                   $("#app_unit_name").text(dec(enc,j[0])); 
		    		        }).fail(function(xhr, textStatus, errorThrown) {
		    		        });
		    		    } 
						}
							
		    			 else{
		    				 alert("Please check To SUS NO,it can't be same as like FROM SUS NO");
								fn_service_category_change();	 
		    			 }
							}
		    		 }
		    		 
		    		 $.post('GETPosttenure_date?' + key + "=" + value,{ comm_id : comm_id },function(k) {
					   		 if(k.length > 0){
						   			$('#dt_of_tos').val(k[0][0]);
						   			$('#dt_of_sos').val(k[0][0]);
						   			
						   			setMinDate('dt_of_tos',k[0][0]);
						   			setMinDate('dt_of_sos',k[0][0]);					   			
					   		 }					   							   		 
					      });

		    		 /* $.post('CheckPersonnelNoDataIncensus?' + key + "=" + value,{ comm_id : comm_id },function(response) {
		    				    			  if (response && response.length > 0) {	
		    				 				    	alert("This personal number fill the census form, so please add this data to With census. ");
		    				 				    	$("input#in_personnel_no").val("");
		    				 						$("#iname").text("");
		    				 						$("#rank2").text("");
		    				 						$("#app_name").text("");
		    				 						$("#app_dt").text("");	
		    				 						$("#dt_of_tos").val("");
		    				 						return false;
		    				 				    }	
		    				    				   							   		 
		    						      });  */
		    						      
		    		 /* $.post('check_prsonalno_in_update?' + key + "=" + value, { comm_id: comm_id }, function(response) {
		    			    if (response === 0) { 
		    			    	debugger;
		    			       const message ="Individual Record is still Pending for Approval. Please notify the Approver to Approve Pending Record in census Form Or Update Officer Form.";
		    			     labelshow(message);
		    			       // $("input#in_personnel_no").val("");
		 					//	$("#iname").text("");
		 					//	$("#rank2").text("");
		 					//	$("#app_name").text("");
		 					//	$("#app_dt").text("");	
		 						//$("#dt_of_tos").val("");
		    			    }
		    			}); */


		   });
				}
				
				else{
					alert(rstatus.error);
					$("input#in_personnel_no").val("");
					$("#iname").text("");
					$("#rank2").text("");
					$("#app_name").text("");
					$("#app_dt").text("");
					return false;
				}
				});
				
			});
		}
		$("input#in_personnel_no").attr('readonly', false);
	}
	
	
function fn_service_category_change(){
		$("input#in_personnel_no").val("");
		$("#iname").text("");
		$("#rank2").text("");
		$("#app_name").text("");
		$("#app_dt").text("");
		$("#census_id").val(0);
		$("#comm_id").val(0);
		//$("#in_auth").val('');
		
		
		//$("#in_auth_dt").val('DD/MM/YYYY');
		$("#i_from_sus_no").val('');
		$("#i_to_sus_no").val('');
		$("#i_from_sus_no").prop("readonly",false);
		$("#dt_of_tos").val('DD/MM/YYYY');
		
		//$("#out_auth_dt").val('DD/MM/YYYY');
		$("#unit_name1").val('');
		$("#unit_nameIn").val('');
		$("#unit_nameIn1").val('');	
		
		$("#o_to_sus_no").val('');
		//$("#out_auth").val('');
		$("#dt_of_sos").val('DD/MM/YYYY');
		$("#unit_description_out").val('');
		$("#unit_description_IN").text('');
		
		$("input#personnel_no").val("");
		$("#name").text("");
		$("#rank").text("");
		$("#out_app_name").text("");
		$("#app_dt").text("");
	}


function  search_sus(sus_obj,unit_id){
// 	removeMinDate();
	var sus_no = sus_obj.value;
	var susNoAuto = $("#"+sus_obj.id);

	
	
	susNoAuto.autocomplete({
	      source: function( request, response ) {
	        $.ajax({
	        type: 'POST',
	        url: "getTargetSUSNoList_postin?"+key+"="+value,
	        data: {sus_no:sus_no},
	          success: function( data ) {
	        	  var susval = [];
                var length = data.length-1;
                var enc = data[length].substring(0,16);
                      for(var i = 0;i<data.length;i++){
                              susval.push(dec(enc,data[i]));
                      }
                      var dataCountry1 = susval.join("|");
                      var myResponse = []; 
				        var autoTextVal=susNoAuto.val();
				$.each(dataCountry1.toString().split("|"), function(i,e){
					var newE = e.substring(0, autoTextVal.length);
					if (e.toLowerCase().includes(autoTextVal.toLowerCase())) {
					  myResponse.push(e);
					}
				});      	          
				response( myResponse ); 
	          }
	        });
	      },
		  minLength: 1,
	      autoFill: true,
	      change: function(event, ui) {
	    	 if (ui.item) {   	        	  
	        	  return true;    	            
	          } else {
	        	  alert("Please Enter Approved Unit SUS No.");
	        	  $('#'+unit_id).val('');
	        	  susNoAuto.val("");	        	  
	        	  susNoAuto.focus();
	        	  return false;	             
	          }   	         
	    }, 
		select: function( event, ui ) {
			var sus_no = ui.item.value;			      	
			 $.post("getTargetUnitNameList?"+key+"="+value, {
				 sus_no:sus_no
       }, function(j) {
              
       }).done(function(j) {
      	 var length = j.length-1;
           var enc = j[length].substring(0,16);
          
           $('#'+unit_id).val(dec(enc,j[0]));   
               
       }).fail(function(xhr, textStatus, errorThrown) {
       });
		} 	     
	});	
	
	
	}

function search_unit(obj,id){
// 	removeMinDate();
			var unit_name = obj.value;
				 var susNoAuto=$("#"+obj.id);
				  susNoAuto.autocomplete({
				      source: function( request, response ) {
				        $.ajax({
				        	type: 'POST',
					    	url: "getTargetUnitsNameActiveList_postin?"+key+"="+value,
				        data: {unit_name:unit_name},
				          success: function( data ) {
				        	 var susval = [];
				        	  var length = data.length-1;
				        	  var enc = data[length].substring(0,16);
					        	for(var i = 0;i<data.length;i++){
					        		susval.push(dec(enc,data[i]));
					        	}
					        	   	          
							response( susval ); 
				          }
				        });
				      },
				      minLength: 1,
				      autoFill: true,
				      change: function(event, ui) {
				    	 if (ui.item) {   	        	  
				        	  return true;    	            
				          } else {
				        	  alert("Please Enter Approved Unit Name.");
				        	  $("#"+id).val('');
				        	  susNoAuto.val("");	        	  
				        	  susNoAuto.focus();
				        	  return false;	             
				          }   	         
				      }, 
				      select: function( event, ui ) {
				    	 var unit_name = ui.item.value;
					            $.post("getTargetSUSFromUNITNAME?"+key+"="+value,{target_unit_name:unit_name}, function(data) {
					            }).done(function(data) {
					            	var length = data.length-1;
						        	var enc = data[length].substring(0,16);
						        	$("#"+id).val(dec(enc,data[0]));
					            }).fail(function(xhr, textStatus, errorThrown) {
					            });
				      } 	     
				}); 			
		
}
	//bisag 09_01_2023 v2(change invalid status)
function  search_sus1from(sus_obj,unit_id){
// 	removeMinDate();
	var sus_no = sus_obj.value;
	var susNoAuto = $("#"+sus_obj.id);

	
	
	susNoAuto.autocomplete({
	      source: function( request, response ) {
	        $.ajax({
	        type: 'POST',
	        url: "getSUSNoList_Active_or_Inactive?"+key+"="+value,
	        data: {sus_no:sus_no},
	          success: function( data ) {
	        	  var susval = [];
                var length = data.length-1;
                var enc = data[length].substring(0,16);
                      for(var i = 0;i<data.length;i++){
                              susval.push(dec(enc,data[i]));
                      }
                      var dataCountry1 = susval.join("|");
                      var myResponse = []; 
				        var autoTextVal=susNoAuto.val();
				$.each(dataCountry1.toString().split("|"), function(i,e){
					var newE = e.substring(0, autoTextVal.length);
					if (e.toLowerCase().includes(autoTextVal.toLowerCase())) {
					  myResponse.push(e);
					}
				});      	          
				response( myResponse ); 
	          }
	        });
	      },
		  minLength: 1,
	      autoFill: true,
	      change: function(event, ui) {
	    	 if (ui.item) {   	        	  
	        	  return true;    	            
	          } else {
	        	  alert("Please Enter Approved Unit SUS No.");
	        	  $('#'+unit_id).val('');
	        	  susNoAuto.val("");	        	  
	        	  susNoAuto.focus();
	        	  return false;	             
	          }   	         
	    }, 
		select: function( event, ui ) {
			var sus_no = ui.item.value;			      	
			 $.post("getUnitNameList_Active_or_Inactive?"+key+"="+value, {
				 sus_no:sus_no
       }, function(j) {
              
       }).done(function(j) {
      	 var length = j.length-1;
           var enc = j[length].substring(0,16);
          
           $('#'+unit_id).val(dec(enc,j[0]));   
               
       }).fail(function(xhr, textStatus, errorThrown) {
       });
		} 	     
	});	
	
	
	}



/* function clearSelection() {
    var radios = document.querySelectorAll('input[name="selection"]');
    radios.forEach(function(radio) {
        radio.checked = false;
    });
} */


/* function loadContent() {
    var selection = document.querySelector('input[name="selection"]:checked');
    if (!selection) {
        return; 
    }

    var url;
    if (selection.value === "withoutcensus") {
        url = "Posting_OutUrl?selection=withoutcensus";
    } else if (selection.value === "withcensus") {
        url = "Posting_OutUrl_withcensus?selection=withcensus";
    }

    window.location.href = url;
} */


/* function setRadioButton() {
    var urlParams = new URLSearchParams(window.location.search);
    var selectedValue = urlParams.get("selection");
    if (selectedValue === "withcensus") {
        document.querySelector('input[value="withcensus"]').checked = true;
    } else {
        document.querySelector('input[value="withoutcensus"]').checked = true;
    }
}

setRadioButton(); */
function search_unit1_from(obj,id){
// 	removeMinDate();
			var unit_name = obj.value;
				 var susNoAuto=$("#"+obj.id);
				  susNoAuto.autocomplete({
				      source: function( request, response ) {
				        $.ajax({
				        	type: 'POST',
					    	url: "UnitsNameList_active_or_inactive?"+key+"="+value,
				        data: {unit_name:unit_name},
				          success: function( data ) {
				        	 var susval = [];
				        	  var length = data.length-1;
				        	  var enc = data[length].substring(0,16);
					        	for(var i = 0;i<data.length;i++){
					        		susval.push(dec(enc,data[i]));
					        	}
					        	   	          
							response( susval ); 
				          }
				        });
				      },
				      minLength: 1,
				      autoFill: true,
				      change: function(event, ui) {
				    	 if (ui.item) {   	        	  
				        	  return true;    	            
				          } else {
				        	  alert("Please Enter Approved Unit Name.");
				        	  $("#"+id).val('');
				        	  susNoAuto.val("");	        	  
				        	  susNoAuto.focus();
				        	  return false;	             
				          }   	         
				      }, 
				      select: function( event, ui ) {
				    	 var unit_name = ui.item.value;
					            $.post("SUSFromUNITNAMEActive_or_InactiveList?"+key+"="+value,{target_unit_name:unit_name}, function(data) {
					            }).done(function(data) {
					            	var length = data.length-1;
						        	var enc = data[length].substring(0,16);
						        	$("#"+id).val(dec(enc,data[0]));
					            }).fail(function(xhr, textStatus, errorThrown) {
					            });
				      } 	     
				}); 			
		
}
	
	
function pvalidateDate(inputDate, inputElement) {
    var currentDate = new Date();
    var parts = inputDate.split('/');
    var selectedDate = new Date(parts[2], parts[1] - 1, parts[0]);
    
    if (selectedDate > currentDate) {
        alert("Future dates are not allowed.");
        inputElement.value = "DD/MM/YYYY";
        inputElement.style.color = "#000000";
    }
}
function labelshow(message){
	debugger;
	   document.getElementById("labelin_id").innerHTML = message;
       document.getElementById("labelin_div").style.display = "block";
       document.getElementById("postin_div").style.display = "none";
	
}
function labelshowout(message){
	 document.getElementById("labelout_id").innerHTML = message;
     document.getElementById("labelout_div").style.display = "block";
     document.getElementById("postout_div").style.display = "none";
}
	
</script>

